/**
 * Copyright (C) 2014-2015 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"std_enums.glsl"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","float","u_alpha_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qN",";","float","qO",",","qP",";","vec4","qQ",";","vec3","qR",",","qS",",","qT",",","qU",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qR","=","u_camera_eye_frag","-","bC",";","qR","=","normalize","(","qR",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qN","=","O","(","u_view_tsr_frag",")",";","qM","(","qR",",","qN",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","qR",",","mat4","(","0.0",")",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}}]},{type:"textline",tokens:["qO","=","qO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qO","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qP","=","u_alpha_factor","*","qO",";","qP","+=","(","1.0","-","step","(","0.0",",","qP",")",")",";","qO","=","mix","(","qP",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qO","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","qO","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tv",";","float","tw",",","tx",",","ty",";","vec3","tz",",","tA",",","tB",",","tC",",","tD",",","tE",";","mat4","tF",",","tG",",","tH",";","tF","=","O","(","u_view_tsr",")",";","tz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","a_tangent",")",";","tC","=","a_tangent","[","3","]","*","cross","(","tA",",","tB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";","tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","mix","(","tz",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","mix","(","tA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","a_tangent",")",";","tE","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tD",")",";","tB","=","mix","(","tB",",","tD",",","u_va_frame_factor",")",";","tC","=","mix","(","tC",",","tE",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","tz",",","tB",",","tC",",","tA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tG","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","(","tG","*","vec4","(","tC",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ru","(","u_camera_eye",",","tB",",","tF",",","tG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ro","(","u_camera_eye",",","tB",",","tF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","tH","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tB",")",";"]}]}}]},{type:"textline",tokens:["c","tI","=","rB","(","tz","-","tC",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tH",")",";","tI",".","b","=","tB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tI","=","rB","(","tz",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tI",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","(","dot","(","cross","(","tI",".","e",",","tI",".","c",")",",","tI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tI",".","c",",","tw",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tF","*","vec4","(","tI",".","a",",","1.0",")",";","tv","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tv",".","xy","+=","u_subpixel_jitter","*","tv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","tv",".","x",";","tx","=","tv",".","y",";","ty","=","tv",".","w",";","bG",".","x","=","(","tw","+","ty",")","/","2.0",";","bG",".","y","=","(","tx","+","ty",")","/","2.0",";","bG",".","z","=","ty",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tF","*","vec4","(","tI",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","tv",";","float","tw",",","tx",";","vec4","ty",";","vec3","tz",",","tA",",","tB",",","tC",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","u_camera_eye_frag","-","bC",";","tz","=","normalize","(","tz",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","O","(","u_view_tsr_frag",")",";","qM","(","tz",",","tv",",","tA",",","tB",",","tC",",","ty",",","tw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","tz",",","mat4","(","0.0",")",",","tA",",","tB",",","tC",",","ty",",","tw",")",";"]}]}}]},{type:"textline",tokens:["tw","=","tw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","u_alpha_factor","*","tw",";","tx","+=","(","1.0","-","step","(","0.0",",","tx",")",")",";","tw","=","mix","(","tx",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tw","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","tw","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dr","(","bD",".","z",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","*=","clamp","(","bF",".","r",",","0.999999999",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","um",";","vec4","un",",","uo",";","float","up",";","vec3","uq",",","ur",",","us",",","ut",",","uu",",","uv",";","mat4","uw",",","ux",",","uy",",","uz",";","uw","=","O","(","u_view_tsr",")",";","uq","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["us","=","vec3","(","a_tangent",")",";","ut","=","a_tangent","[","3","]","*","cross","(","ur",",","us",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["us","=","vec3","(","0.0",")",";","ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","mix","(","uq",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","mix","(","ur",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uu","=","vec3","(","a_tangent",")",";","uv","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","uu",")",";","us","=","mix","(","us",",","uu",",","u_va_frame_factor",")",";","ut","=","mix","(","ut",",","uv",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","uq",",","us",",","ut",",","ur",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","uA","=","t_","(","uq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","ut",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","uw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ux","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["us","=","(","ux","*","vec4","(","ut",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uy","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uy","=","uw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uz","=","ru","(","u_camera_eye",",","us",",","uy",",","ux",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uz","=","ro","(","u_camera_eye",",","us",",","uy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uz","=","uz","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","us",")",";"]}]}}]},{type:"textline",tokens:["c","uA","=","rB","(","uq","-","ut",",","ut",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","uz",")",";","uA",".","b","=","us",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","uA","=","rB","(","uq",",","ut",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","ux",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","uA",".","a",",","uA",".","b",",","ur",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","uA",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","uA",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["up","=","(","dot","(","cross","(","uA",".","e",",","uA",".","c",")",",","uA",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","uA",".","c",",","up",")",";"]}]}}]}]}}]},{type:"textline",tokens:["un","=","uw","*","vec4","(","uA",".","a",",","1.0",")",";","uo","=","u_proj_matrix","*","un",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uo",".","xy","+=","u_subpixel_jitter","*","uo",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","uo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","uA",".","a",",","uA",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","un",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","(","u_proj_matrix","*","uw","[","3","]",")",".","xy",";","up","=","SHADOW_TEX_RES","/","2.0",";","um","=","floor","(","um","*","up","+","0.5",")","/","up","-","um",";","uo",".","xy","+=","um",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uo",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","um",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","um",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","un",";","vec3","uo",";","mat4","up",",","uq",",","ur",";","up","=","O","(","u_view_tsr",")",";","uq","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","(","uq","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","ur","=","ro","(","u_camera_eye",",","uo",",","up",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","ur","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","us","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",")",";","us",".","b","=","uo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","us","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uq",")",";"]}]}}]},{type:"textline",tokens:["un","=","u_proj_matrix","*","up","*","vec4","(","us",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","un",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","un",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ur","(","float","uq",")","{","return","uq","-","floor","(","uq","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uA","(","inout","float","us",",","in","float","ut","[","up","]",",","in","float","uu",")","{","float","uv",",","uw",",","ux",",","uy",";","for","(","int","uz","=","0",";","uz","<","NUM_RINGS",";","uz","++",")","{","uv","=","40.0","*","ut","[","uz","]",";","uw","=","300.0","*","(","ur","(","uv",")","-","0.005",")",";","ux","=","uv",";","uy","=","abs","(","ux","*","(","u_halo_size","*","uw","-","uu",")",")",";","us","+=","1.0","-","min","(","uy",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uJ","(","inout","float","uB",",","in","float","uC","[","up","]",",","in","float","uD",")","{","float","uE",",","uF",",","uG",",","uH",";","for","(","int","uI","=","0",";","uI","<","NUM_LINES",";","uI","++",")","{","uE","=","uC","[","uI","]",";","uF","=","uE",";","uG","=","1000.0","*","(","ur","(","uE",")","-","0.005",")",";","uH","=","20.0","*","abs","(","uF","*","bM",".","x","+","uG","*","bM",".","y",")",";","uB","+=","1.0","-","min","(","uH",",","1.0",")",";","}","uB","*=","uD",";","}"]}]}}]},{type:"textline",tokens:["void","uQ","(","inout","float","uK",",","in","vec2","uL",")","{","float","uM",",","uN",",","uO",",","uP",";","uN","=","atan","(","uL",".","y",",","uL",".","x",")",";","uN","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uO","=","cos","(","uN",")",";","uP","=","sin","(","uN",")",";","uN","=","(","uO","*","uL",".","x","+","uP","*","uL",".","y",")","*","(","uO","*","uL",".","y","-","uP","*","uL",".","x",")",";","uM","=","abs","(","uN",")",";","if","(","uM","<","1.0",")","{","uM","=","(","0.01","*","u_halo_size",")","/","(","uM",")",";","uK","*=","sqrt","(","min","(","uM",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","uR",";","float","uS",",","uT",",","uU",",","uV",";","uS","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","uT","=","sqrt","(","uS",")",";","uS","=","max","(","1.0","-","uS",",","0.0",")",";","uS","=","pow","(","uS",",","u_halo_hardness",")",";","uU","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uW","[","up","]",";","for","(","int","uX","=","0",";","uX","<","up",";","uX","++",")","{","uW","[","uX","]","=","fract","(","uo","/","(","float","(","uX",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","=","0.0",";","uA","(","uV",",","uW",",","uT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","0.0",";","uJ","(","uT",",","uW",",","uS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","(","uS",",","bM",")",";"]}]}}]},{type:"textline",tokens:["uS","*=","uU",";","uR","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","*=","uS",";","uR","+=","u_halo_rings_color","*","uV",";","uS","+=","uV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","*=","uU",";","uR","+=","u_halo_lines_color","*","uT",";","uS","+=","uT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uS","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","u_halo_stars_blend","*","(","un",".","y","-","u_halo_stars_height",")",";","uS","*=","clamp","(","uT",",","0.0",",","1.0",")",";","uS","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","uR",")",";","bx","(","uR",",","uS",")",";","gl_FragColor","=","vec4","(","uR",",","uS",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","un",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","up",",","uq",";","vec3","ur",";","mat4","us",",","ut",",","uu",";","us","=","O","(","u_view_tsr",")",";","ut","=","O","(","u_model_tsr",")",";","ur","=","(","ut","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","uo","=","fract","(","ur",".","x","+","ur",".","y","+","ur",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","qT","(","ur",",","us",")",";","uu","=","us",";","uu","[","3","]","[","0","]","=","0.0",";","uu","[","3","]","[","1","]","=","0.0",";","uu","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","qT","(","ur",",","us",")",";"]}]}}]},{type:"textline",tokens:["up","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","up","=","ut","*","up",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","uu","*","up",";","uq",".","z","=","0.99999","*","uq",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["un","=","up",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","us","*","up",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uq",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","vec3","up",";","up","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_view_proj_matrix","*","vec4","(","up",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","vb",";","mat4","vc",";","vec4","vd",";","vec3","ve",",","vf",",","vg",",","vh",",","vi",";","float","vj",",","vk",",","vl",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vf","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","O","(","u_view_tsr_frag",")",";","qM","(","vf",",","vc",",","vg",",","vh",",","vi",",","vd",",","vl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","vf",",","mat4","(","0.0",")",",","vg",",","vh",",","vi",",","vd",",","vl",")",";"]}]}}]},{type:"textline",tokens:["vg","=","vg",";","vl","=","vl",";","vi","=","vi",";","vd","=","vd",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vg","=","max","(","vg","-","sqrt","(","0.01","*","-","min","(","vk",",","0.0",")",")",",","0.5","*","vg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","vg",",","vk",",","u_time",",","vd",",","vi",",","u_sun_direction",",","ve",",","u_sun_quaternion",",","bC",",","vj",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vl","<","0.5",")","discard",";","vl","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vl","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["va","(","vg",",","length","(","bD",")",",","vf",",","vk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["va","(","vg",",","length","(","bD",")",",","vf",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","vk","=","vb",".","g",";","vg","=","vec3","(","vk",")",";"]}]}}]},{type:"textline",tokens:["bu","(","vg",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","vg",",","vl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vg",",","vl",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vb",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vd",",","ve",";","float","vf",";","vec3","vg",",","vh",",","vi",",","vj",",","vk",",","vl",",","vm",";","mat4","vn",",","vo",",","vp",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vn","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["vo","=","O","(","u_model_tsr",")",";","vg","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vh","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vi","=","vec3","(","a_tangent",")",";","vj","=","a_tangent","[","3","]","*","cross","(","vh",",","vi",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","(","vo","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vl","=","normalize","(","(","vo","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vk","=","vk","-","u_camera_eye",";","vj","=","cross","(","vk",",","vl",")",";","vi","=","cross","(","vl",",","vj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vi","=","vec3","(","0.0",")",";","vj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vg","=","mix","(","vg",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","mix","(","vh",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vl","=","vec3","(","a_tangent",")",";","vk","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vl",")",";","vi","=","mix","(","vi",",","vl",",","u_va_frame_factor",")",";","vj","=","mix","(","vj",",","vk",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","vg",",","vi",",","vj",",","vh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","vq","=","t_","(","vg",",","vi",",","vj",",","vh",",","vk",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vl","=","(","vo","*","vec4","(","vk",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vp","=","ru","(","u_camera_eye",",","vl",",","vn",",","vo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vp","=","ro","(","u_camera_eye",",","vl",",","vn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vm","=","(","vo","*","vec4","(","vk",",","1.0",")",")",".","xyz",";","vp","=","vp","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vm",")",";"]}]}}]},{type:"textline",tokens:["c","vq","=","rB","(","vg","-","vk",",","vk",",","vi",",","vj",",","vh",",","vp",")",";","vq",".","b","=","vl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","vq","=","rB","(","vg",",","vk",",","vi",",","vj",",","vh",",","vo",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vf","=","(","dot","(","cross","(","vq",".","e",",","vq",".","c",")",",","vq",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","vq",".","c",",","vf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","vq",".","a",",","vq",".","b",",","vh",")",";"]}]}}]},{type:"textline",tokens:["bC","=","vq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","vq",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","u_camera_eye","-","vq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","vq",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vd","=","vn","*","vec4","(","vq",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vd",";"]}]}}]},{type:"textline",tokens:["ve","=","u_proj_matrix","*","vd",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ve",".","xy","+=","u_subpixel_jitter","*","ve",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","ve",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","vq",".","a",",","vq",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vd",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ve",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vb",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xi",",","xj",",","xk",",","xl",";","mat4","xm",";","mat3","xn",";","vec2","xo",",","xp",",","xq",",","xr",";","vec3","xs",",","xt",",","xu",",","xv",",","xw",",","xx",",","xy",",","xz",",","xA",";","float","xB",",","xC",",","xD",",","xE",",","xF",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["xB","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","bM",";"]}]}}]},{type:"textline",tokens:["xt","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["xt","=","xt",";","else","xt","=","-","xt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xu","=","cross","(","xt",",","bF",".","xyz",")","*","bF",".","w",";","xn","=","mat3","(","bF",".","xyz",",","xu",",","xt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","O","(","u_view_tsr_frag",")",";","xp","=","normalize","(","xm","*","vec4","(","bE",",","0.0",")",")",".","st",";","xp","=","xp","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xB","<","PARALLAX_LOD_DIST",")","{","xD","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","xB",")",",","0.0",",","1.0",")",";","xD","=","u_parallax_scale","*","xD",";","xu","=","normalize","(","vb","*","xn",")",";","xE","=","1.0","/","PARALLAX_STEPS",";","xq","=","xu",".","xy","*","xD","/","(","PARALLAX_STEPS","*","xu",".","z",")",";","xD","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","xp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xr","=","xo",";"]}]}}]},{type:"textline",tokens:["xF","=","texture2D","(","u_normalmap0",",","xr",")",".","a",";","for","(","float","xG","=","1.0",";","xG","<=","PARALLAX_STEPS",";","xG","++",")","{","if","(","xF","<","xD",")","{","xD","-=","xE",";","xr","-=","xq",";","xF","=","texture2D","(","u_normalmap0",",","xr",")",".","a",";","}","}","xq","=","xr","+","xq",";","xE","=","texture2D","(","u_normalmap0",",","xq",")",".","a","-","(","xD","+","xE",")",";","xD","=","xF","-","xD",";","xE","=","xD","/","(","xD","-","xE",")",";","xr","=","xE","*","xq","+","(","1.0","-","xE",")","*","xr",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xo","+=","xr","-","xp",";"]}]}}]},{type:"textline",tokens:["xp","=","xr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xp","+=","xr","-","xo",";"]}]}}]},{type:"textline",tokens:["xo","=","xr",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","texture2D","(","u_normalmap0",",","xp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xi","=","texture2D","(","u_normalmap0",",","xo",")",";"]}]}}]},{type:"textline",tokens:["xu","=","xi",".","rgb","-","0.5",";","xu","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xu",",","u_normal_factor",")",";","xu","=","xn","*","xu",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xu","=","xt",";"]}]}}]},{type:"textline",tokens:["xu","=","normalize","(","xu",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","normalize","(","xm","*","vec4","(","xu",",","0.0",")",")",".","st",";","xp","=","xp","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xt","=","normalize","(","vb",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","=","vc",";","br","(","xv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","vec4","(","xv",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xi","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["xE","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xj","=","texture2D","(","u_colormap0",",","xp",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xj","=","texture2D","(","u_colormap0",",","xo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xj",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","texture2D","(","u_colormap1",",","xp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xk","=","texture2D","(","u_colormap1",",","xo",")",";"]}]}}]},{type:"textline",tokens:["br","(","xk",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","texture2D","(","u_stencil0",",","xp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xl","=","texture2D","(","u_stencil0",",","xo",")",";"]}]}}]},{type:"textline",tokens:["xj","=","mix","(","xj",",","xk",",","xl",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi",".","rgb","=","mix","(","xi",".","rgb",",","xj",".","rgb",",","u_diffuse_color_factor",")",";","xD","=","u_alpha_factor","*","xj",".","a",";","xD","+=","(","1.0","-","step","(","0.0",",","xD",")",")",";","xi",".","a","=","mix","(","xD",",","1.0",",","u_diffuse_color",".","a",")",";","xE","=","xj",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xj",".","rgb",",","u_diffuse_color_factor",")",";","xi",".","a","=","xj",".","a",";","xE","=","xj",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["xv","=","u_diffuse_intensity","*","xi",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","xv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xx","=","u_environment_energy","*","dS","(","xu",")",";","xx","=","u_ambient","*","xx",";","xj","=","du","(","xv",")",";","xy","=","u_emit","*","xi",".","rgb",";","xz","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","vec3","(","xE",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","texture2D","(","u_specmap0",",","xp",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xA","=","texture2D","(","u_specmap0",",","xo",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","xA",".","rgb",")",";","xz","=","mix","(","xz",",","xA",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xE","=","u_specular_params","[","0","]",";","xo","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xz","=","xE","*","xz",";","xh","(","xy",",","xx",",","xv",",","xz",",","bC",",","xu",",","xt",",","xo",",","u_diffuse_params",",","xj",",","0.0",",","vec4","(","0.0",")",",","xw",",","xA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xw",",","xt",",","xu",",","u_reflect_factor",",","xm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xw",",","xt",",","xu",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xw",",","xt",",","xu",",","0.0",",","xm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xw",",","xt",",","xu",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xw","+=","xA",";"]}]}}]},{type:"textline",tokens:["xE","=","xi",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","max","(","xw","-","sqrt","(","0.01","*","-","min","(","xC",",","0.0",")",")",",","0.5","*","xw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","xw",",","xC",",","u_time",",","xj",",","xu",",","u_sun_direction",",","xs",",","u_sun_quaternion",",","bC",",","xB",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xE","<","0.5",")","discard",";","xE","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xD","=","max","(","max","(","xA",".","r",",","xA",".","g",")",",","xA",".","b",")","*","u_specular_alpha",";","xE","=","xi",".","a","*","(","1.0","-","xD",")","+","xD",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xE","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","mix","(","ef","(","bG",",","xu",".","xz","*","u_refr_bump",")",",","xw",",","xE",")",";","xE","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["va","(","xw",",","xB",",","xt",",","xC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["va","(","xw",",","xB",",","xt",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","xw",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","xw",",","xE",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xw",",","xE",")",";","}"]}]},exports["main_stack.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vb",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xi",",","xj",";","float","xk",";","vec3","xl",",","xm",",","xn",",","xo",",","xp",",","xq",",","xr",";","mat4","xs",",","xt",",","xu",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xs","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xt","=","O","(","u_model_tsr",")",";","xl","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn","=","vec3","(","a_tangent",")",";","xo","=","a_tangent","[","3","]","*","cross","(","xm",",","xn",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","(","xt","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xq","=","normalize","(","(","xt","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","xp","=","xp","-","u_camera_eye",";","xo","=","cross","(","xp",",","xq",")",";","xn","=","cross","(","xq",",","xo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xn","=","vec3","(","0.0",")",";","xo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","mix","(","xl",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","mix","(","xm",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","vec3","(","a_tangent",")",";","xp","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","xq",")",";","xn","=","mix","(","xn",",","xq",",","u_va_frame_factor",")",";","xo","=","mix","(","xo",",","xp",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","xl",",","xn",",","xo",",","xm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xp","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","xv","=","t_","(","xl",",","xn",",","xo",",","xm",",","xp",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","xs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","(","xt","*","vec4","(","xp",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xu","=","ru","(","u_camera_eye",",","xq",",","xs",",","xt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xu","=","ro","(","u_camera_eye",",","xq",",","xs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","(","xt","*","vec4","(","xp",",","1.0",")",")",".","xyz",";","xu","=","xu","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","xr",")",";"]}]}}]},{type:"textline",tokens:["c","xv","=","rB","(","xl","-","xp",",","xp",",","xn",",","xo",",","xm",",","xu",")",";","xv",".","b","=","xq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","xv","=","rB","(","xl",",","xp",",","xn",",","xo",",","xm",",","xt",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","(","dot","(","cross","(","xv",".","e",",","xv",".","c",")",",","xv",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","xv",".","c",",","xk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","xv",".","a",",","xv",".","b",",","xm",")",";"]}]}}]},{type:"textline",tokens:["bC","=","xv",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","xv",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","u_camera_eye","-","xv",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","xv",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["xi","=","xs","*","vec4","(","xv",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","xi",";"]}]}}]},{type:"textline",tokens:["xj","=","u_proj_matrix","*","xi",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["xj",".","xy","+=","u_subpixel_jitter","*","xj",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","xj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","xv",".","a",",","xv",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","xi",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xj",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","xi",";","varying","vec3","vc",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";","varying","vec3","bG",";","varying","float","xj",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xk",";","vec3","xl",";","float","xm",",","xn",",","xo",";","vec2","xp",",","xq",";","xp","=","gl_PointCoord","-","0.5",";","xm","=","2.0","*","length","(","xp",")",";","xm","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","xm",")",";","xm","=","u_diffuse_color",".","a","*","xi","*","(","1.0","-","xm",")",";","xl","=","vc","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","bG",".","xy","/","bG",".","z",";","xp","=","vec2","(","xp",".","x",",","-","xp",".","y",")","*","xj","*","u_texel_size",";","xp","=","vec2","(","xq","+","xp",")",";","xk","=","texture2D","(","u_scene_depth",",","xp",")",";","xn","=","Z","(","xk",")",";","xo","=","-","bD",".","z","/","u_view_max_depth",";","xo","=","xn","-","xo",";","xo","=","u_view_max_depth","/","SOFT_STRENGTH","*","xo",";","xm","=","xm","*","min","(","xo",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","xl",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","xl",",","xm",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xl",",","xm",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["varying","float","xi",";","varying","vec3","vc",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";","varying","vec3","bG",";","varying","float","xj",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","xY",",","xZ",",","x_",",","ya",";","vec4","yb",",","yc",";","mat4","yd",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yd","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xk","ye",";","ye","=","xX","(",")",";","yb","=","yd","*","vec4","(","ye",".","b",",","1.0",")",";","yc","=","u_proj_matrix","*","yb",";","gl_Position","=","yc",";","xi","=","ye",".","c",";","vc","=","ye",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","yb",";"]}]}}]},{type:"textline",tokens:["xY","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","xY","=","ye",".","a","*","xY",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xZ","=","yc",".","x",";","x_","=","yc",".","y",";","ya","=","yc",".","w",";","bG",".","x","=","(","xZ","+","ya",")","/","2.0",";","bG",".","y","=","(","x_","+","ya",")","/","2.0",";","bG",".","z","=","ya",";","xj","=","xY",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","xY",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","xi",";","varying","vec3","vc",";","varying","vec2","bM",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","xY",";","float","xZ",",","x_",",","ya",";","vec3","yb",",","yc",",","yd",",","ye",",","yf",",","yg",",","yh",",","yi",";","vec4","yj",",","yk",";","yj","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["yk","=","texture2D","(","u_sampler",",","bM",")",";","br","(","yk",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yj",".","rgb","=","mix","(","yj",".","rgb",",","yk",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yj",".","rgb","*=","mix","(","vec3","(","1.0",")",",","yk",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yj",".","a","=","yk",".","a",";"]}]}}]},{type:"textline",tokens:["yj",".","rgb","*=","vc",";","yb","=","u_diffuse_intensity","*","yj",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yc","=","normalize","(","vb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","u_emit","*","yj",".","rgb",";","ye","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yf","=","u_environment_energy","*","dS","(","ye",")",";"]}]}}]},{type:"textline",tokens:["yf","=","u_ambient","*","yf",";","xZ","=","u_specular_params","[","0","]",";","xY","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yg","=","xZ","*","u_specular_color",";","xh","(","yd",",","yf",",","yb",",","yg",",","bC",",","ye",",","yc",",","xY",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","yh",",","yi",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yh","=","yb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["va","(","yh",",","length","(","bD",")",",","yc",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["xZ","=","yj",".","a","*","xi",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","-","bD",".","z","/","u_view_max_depth",";","yj","=","texture2DProj","(","u_scene_depth",",","bG",")",";","ya","=","Z","(","yj",")",";","x_","=","ya","-","x_",";","x_","=","u_view_max_depth","/","SOFT_STRENGTH","*","x_",";","xZ","=","xZ","*","min","(","x_",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","yh",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","yh",",","xZ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yh",",","xZ",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["varying","float","xi",";","varying","vec3","vc",";","varying","vec2","bM",";","varying","vec3","vb",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","x_","(","vec2","xY",",","vec2","xZ",")","{","return","(","atan","(","xZ",".","y",",","xZ",".","x",")","-","atan","(","xY",".","y",",","xY",".","x",")",")",";","}","void","main","(",")","{","vec4","ya",",","yb",",","yc",";","float","yd",",","ye",",","yf",";","mat4","yg",",","yh",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yg","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xk","yi",";","yi","=","xX","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","yd","=","yi",".","e",";","yh","=","qT","(","yi",".","b",",","yg",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","yd","=","yi",".","e",";","yh","=","w","(",")",";","yh","[","3","]","=","vec4","(","yi",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","yd","=","yi",".","e",";","yh","=","A","(","radians","(","90.0",")",")",";","yh","[","3","]","=","vec4","(","yi",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","yd","=","x_","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","yi",".","e",";","yh","=","y","(","radians","(","-","90.0",")",")",";","yh","[","3","]","=","vec4","(","yi",".","b",",","1.0",")",";","}","ya","=","vec4","(","a_p_bb_vertex","*","2.0","*","yi",".","a","*","u_p_size",",","0.0",",","1.0",")",";","ya","=","yh","*","C","(","yd",")","*","ya",";","yb","=","yg","*","ya",";","yc","=","u_proj_matrix","*","yb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","yc",".","x",";","ye","=","yc",".","y",";","yf","=","yc",".","w",";","bG",".","x","=","(","yd","+","yf",")","/","2.0",";","bG",".","y","=","(","ye","+","yf",")","/","2.0",";","bG",".","z","=","yf",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","yc",";","xi","=","yi",".","c",";","vc","=","yi",".","d",";","bM","=","a_p_bb_vertex","+","0.5",";","bC","=","ya",".","xyz",";","vb","=","u_camera_eye","-","ya",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","yb",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","xY",";","const","float","xZ","=","0.99",";","const","float","x_","=","1.8",";","const","int","ya","=","8",";","float","yg","(","vec3","yb",",","vec3","yc",")","{","float","yd",",","ye",",","yf",";","yd","=","dot","(","yc",",","yc",")",";","ye","=","2.0","*","dot","(","yc",",","yb",")",";","yf","=","dot","(","yb",",","yb",")","-","1.0",";","yd","=","ye","*","ye","-","4.0","*","yd","*","yf",";","yd","=","sqrt","(","yd",")",";","yd","=","(","-","ye","-","yd",")","/","2.0",";","yd","=","yf","/","yd",";","return","yd",";","}","float","yn","(","float","yh",",","float","yi",")","{","float","yj",",","yk",",","yl",",","ym",";","yj","=","3.0","*","(","1.0","-","yi","*","yi",")",";","yk","=","2.0","*","(","2.0","+","yi","*","yi",")",";","yl","=","1.0","+","yh","*","yh",";","ym","=","pow","(","1.0","+","yi","*","yi","-","2.0","*","yi","*","yh",",","1.5",")",";","ym","=","max","(","ym",",","0.00001",")",";","return","(","yj","/","yk",")","*","(","yl","/","ym",")",";","}","float","yt","(","vec3","yo",",","vec3","yp",",","float","yq",")","{","vec3","yr",";","float","ys",";","ys","=","dot","(","yp",",","-","yo",")",";","if","(","ys","<","0.0",")","{","return","1.0",";","}","yr","=","yo","+","ys","*","yp",";","if","(","length","(","yr",")","<","yq",")","{","return","0.0",";","}","else","if","(","length","(","yr",")",">=","yq",")","{","yr","=","normalize","(","yr",")","*","yq","-","yo",";","ys","=","acos","(","dot","(","normalize","(","yr",")",",","yp",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","ys","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","yx","(","float","yu",",","vec3","yv",",","float","yw",")","{","return","yv","-","yv","*","pow","(","u_sky_color",",","vec3","(","yw","/","yu",")",")",";","}","void","main","(",")","{","float","yy",",","yz",",","yA",",","yB",",","yC",",","yD",",","yE",",","yF",",","yG",";","vec3","yH",",","yI",",","yJ",",","yK",",","yL",",","yM",",","yN",";","yH","=","normalize","(","xY",")",";","yI","=","u_sun_direction",";","yy","=","dot","(","yH",",","yI",")",";","yz","=","yn","(","yy",",","-","0.01",")","*","u_rayleigh_brightness","*","yI",".","y",";","yA","=","yn","(","yy","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","yI",".","y",")",";","yy","=","smoothstep","(","0.0",",","100.0",",","yn","(","yy",",","0.9995",")",")","*","u_spot_brightness",";","yJ","=","vec3","(","0.0",",","xZ",",","0.0",")",";","yB","=","yg","(","yJ",",","yH",")",";","yC","=","yB","/","float","(","ya",")",";","yD","=","yt","(","yJ",",","yH",",","xZ","-","0.3",")",";","yK","=","vec3","(","0.0",",","0.0",",","0.0",")",";","yL","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","yO","=","0",";","yO","<","ya",";","yO","++",")","{","yE","=","yC","*","float","(","yO",")",";","yM","=","yJ","+","yH","*","yE",";","yF","=","yt","(","yM",",","yI",",","xZ","-","0.2",")",";","yG","=","yg","(","yM",",","yI",")",";","yN","=","yx","(","yG",",","vec3","(","x_",")",",","u_scatter_strength",")","*","yF",";","yK","+=","yx","(","sqrt","(","yE",")",",","u_sky_color","*","yN",",","u_rayleigh_strength",")",";","yL","+=","yx","(","yE",",","yN",",","u_mie_strength",")",";","}","yK","=","yK","*","yD","*","pow","(","yB",",","u_rayleigh_collection_power",")","/","float","(","ya",")",";","yL","=","(","yL","*","yD","*","pow","(","yB",",","u_mie_collection_power",")",")","/","float","(","ya",")",";","yK","=","vec3","(","yy","*","yL","+","yA","*","yL","+","yz","*","yK",")",";","bu","(","yK",")",";","gl_FragColor","=","vec4","(","yK",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","xY",";","void","main","(",")","{","vec4","xZ",",","x_",";","xZ","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","x_","=","u_cube_view_matrix","*","xZ",";","xY","=","x_",".","xyz",";","gl_Position","=","xZ",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","xZ",";","xZ","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","xZ",".","rgb",")",";","bx","(","xZ",".","rgb",",","xZ",".","a",")",";","gl_FragColor","=","xZ",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","xZ",";","float","x_",";","vec4","ya",";","vec3","yb",";","mat4","yc",";","yc","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","yb","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","ya","=","u_proj_matrix","*","yc","*","vec4","(","yb",",","0.0",")",";","ya",".","x","/=","ya",".","w",";","ya",".","y","/=","ya",".","w",";","ya","+=","99999.0","*","step","(","ya",".","z",",","0.0",")",";","ya","+=","100.0","*","(","step","(","1.0",",","abs","(","ya",".","x",")",")","+","step","(","1.0",",","abs","(","ya",".","y",")",")",")",";","ya",".","x","=","-","a_lf_dist","*","ya",".","x",";","ya",".","y","=","-","a_lf_dist","*","ya",".","y",";","x_","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","xZ","=","vec2","(","a_lf_bb_vertex",".","x","/","x_",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","yd","=","1.9",";","xZ","*=","(","1.0","+","yd","*","length","(","ya",".","xy",")",")",";","}","gl_Position","=","vec4","(","ya",".","xy","+","xZ",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Ac","(","vec3","zY",",","vec3","zZ",",","float","z_",",","float","Aa",")","{","float","Ab",";","Ab","=","z_","*","Aa",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ym","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yq","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yu","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yz","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yE","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yJ","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yN","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yR","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yV","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yZ","(","zY",",","zZ",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ze","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zk","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zq","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zw","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zB","(","zZ",",","zY",",","Ab",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zF","(","zZ",",","zY",",","Ab",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Ak","(","float","Ad",",","float","Ae",",","float","Af",",","float","Ag",")","{","float","Ah",";","vec3","Ai",",","Aj",";","Ai","=","vec3","(","Ad",")",",","Aj","=","vec3","(","Ae",")",";","Ah","=","Af","*","Ag",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ym","(","Aj",",","Ai",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yq","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yu","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zL","(","Ad",",","Ae",",","Ah",",","Ag",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zR","(","Ad",",","Ae",",","Ah",",","Ag",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zX","(","Ad",",","Ae",",","Ah",",","Ag",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yN","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yR","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yV","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yZ","(","Ai",",","Aj",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zB","(","Aj",",","Ai",",","Ah",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zF","(","Aj",",","Ai",",","Ah",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","xY",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Al",";","float","Am",",","An",",","Ao",";","vec3","Ap",",","Aq",",","Ar",",","As",",","At",";","Aq","=","normalize","(","xY",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","textureCube","(","u_sky",",","Aq",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","u_horizon_color",";","bu","(","Ap",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec3","(","xY",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Am","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["An","=","acos","(","Aq",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","abs","(","An","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","1.0","-","An","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["As","=","u_horizon_color",";","At","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","1.0",";","Al","=","textureCube","(","u_sky",",","Aq",")",";","br","(","Al",".","rgb",")",";","An","=","Al",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","bB","(","Al",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","vec4","(","vec3","(","1.0",")","-","Al",".","rgb",",","Al",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["An","=","1.0","-","An",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["An","=","Al",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["As","=","Ac","(","Al",".","rgb",",","As",",","An",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Ar",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Ao","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Ao","!=","0.0",")","At","=","Ac","(","Al",".","rgb",",","At",",","An",",","Ao",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["An","=","dot","(","Al",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Am","=","Ak","(","u_sky_tex_dvar",",","Am",",","An",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","mix","(","As",",","At",",","Am",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","As",";"]}]}}]},{type:"textline",tokens:["bu","(","Ap",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","As",")",";","bu","(","At",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","mix","(","As",",","At",",","Am",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","As",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Ap",")",";","Am","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","Am","=","min","(","-","Am","*","0.03",",","0.8",")",";","An","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","As","=","vec3","(","0.0",")",";","Al","=","u_underwater_fog_color_density",";","Al",".","rgb","=","mix","(","Al",".","rgb",",","As",",","min","(","-","Aq",".","y","+","Am",",","1.0",")",")","*","An",";","Am","=","clamp","(","sign","(","Aq",".","y","-","0.05","*","Am",")",",","0.0",",","1.0",")",";","Ap","=","mix","(","Al",".","rgb",",","Ap",",","Am",")",";","bu","(","Ap",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ap",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","xY",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zY",",","zZ",";","zY","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","zZ","=","u_sky_vp_inverse","*","zY",";","xY","=","zZ",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","zY",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","zY","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vb",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","zZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","z_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Aa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ab",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","An","(","in","vec2","Ac",",","in","vec3","Ad",",","in","vec3","Ae",",","in","vec3","Af",",","out","float","Ag",")","{","float","Ah",",","Ai",",","Aj",";","vec2","Ak",";","vec3","Al",",","Am",";","Ag","=","0.0",";","Al","=","reflect","(","-","Ae",",","Ad",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","Ac",".","xy","+","Ad",".","xz","*","REFL_BUMP","/","bH",";","Ag","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Am","=","texture2D","(","u_plane_reflection",",","Ak",")",".","rgb",";","br","(","Am",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","u_mirror_factor",";","Am","=","Af","*","textureCube","(","u_mirrormap",",","Al",")",".","rgb",";","br","(","Am",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","u_reflect_factor",";","Am","=","Af","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Am",")",";"]}]}}]},{type:"textline",tokens:["Al","=","normalize","(","Al","+","Ae",")",";","Ah","=","1.0","-","dot","(","Ae",",","Al",")",";","Ai","=","u_fresnel_params","[","3","]",";","Aj","=","u_fresnel_params","[","2","]",";","Aj","=","Ai","+","(","1.0","-","Ai",")","*","pow","(","Ah",",","Aj",")",";","Ag","=","min","(","Ag","*","Aj",",","1.0",")",";","return","Am",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Ao",";","vec2","Ap",",","Aq",",","Ar",";","float","As",",","At",",","Au",",","Av",",","Aw",",","Ax",";","vec3","Ay",",","Az",",","AA",",","AB",",","AC",",","AD",",","AE",",","AF",",","AG",";","mat3","AH",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AH","=","mat3","(","bF",",","zZ",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["As","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","vec2","(","z_",".","x",",","-","z_",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","vec3","(","0.0",")",";","AA","=","texture2D","(","u_normalmap0",",","Ap","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Az","+=","AA",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["AB","+=","AA",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","texture2D","(","u_normalmap0",",","Ap","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Az","+=","AA",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["AB","+=","AA",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","texture2D","(","u_normalmap0",",","Ap","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Az","+=","AA",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["AB","+=","AA",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","texture2D","(","u_normalmap0",",","Ap","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Az","+=","AA",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["AB","+=","AA",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","AH","*","AB",";","if","(","!","f","(","AB",",","vec3","(","0.0",")",")",")","AB","=","normalize","(","AB",")",";","AB","=","mix","(","Ay",",","AB",",","0.2",")",";","AB","=","normalize","(","AB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","mix","(","Ay",",","normalize","(","AH","*","Az",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","mix","(","Ay",",","normalize","(","AH","*","Az",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["Ay","=","normalize","(","Ay",")",";"]}]}}]},{type:"textline",tokens:["Az","=","normalize","(","vb",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["At","=","bH","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_diffuse_color",".","a",";","Ao","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Av","=","Z","(","Ao",")",";","Aw","=","max","(","Av","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","Aq","+","Ay",".","xz","*","u_refr_bump","/","bH",";","Av","=","dY","(","Av",",","Ar",",","Aq",")",";","Av","=","max","(","Av","-","bH",",","0.0",")",";","Av","=","u_view_max_depth","/","ABSORB","*","Av",";","if","(","u_cam_water_depth","<","0.0",")","Ax","=","0.0",";","else","Ax","=","min","(","Au","*","Av",",","1.0",")",";","Av","=","u_view_max_depth","/","ABSORB","*","Aw",";","Au","=","min","(","15.0","*","Au","*","u_view_max_depth","*","Aw",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","u_view_max_depth","/","ABSORB","*","Aw",";","if","(","u_cam_water_depth",">","0.0",")","Au","=","min","(","Au","*","Av",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Au","*=","min","(","5.0","*","At",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","1.0","-","Au",";","Ar","=","Aq","+","Ay",".","xz","*","u_refr_bump","/","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","texture2D","(","u_refractmap",",","Ar",")",".","rgb",";","br","(","AA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","pow","(","min","(","Aa",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","AC","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Av",")",";","Av","=","pow","(","min","(","Aa",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","AC","=","mix","(","u_shore_water_col",",","AC",",","Av",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AC","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","max","(","1.0","-","u_view_max_depth","*","Aw",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","1.0","-","Au",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["As","=","max","(","As","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","normalize","(","vec3","(","Aa",".","r",",","0.0",",","Aa",".","g",")",")",";","AD","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","AD",",","0.8",")",")",";","Av","=","1.25","*","max","(","dot","(","AB",",","AD",")","-","0.2",",","0.0",")",";","Av","+=","max","(","dot","(","AB",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Aw","+=","Av","*","(","1.0","-","Aa",".","b",")",";","As","*=","(","1.0","-","0.95","*","pow","(","Aa",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Aw","+=","As",";","Aw","=","min","(","u_foam_factor","*","Aw",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Ao","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Ap","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["As","=","u_specular_params","[","0","]",";","Ap","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","AB","=","As","*","u_specular_color",";","AD","=","u_environment_energy","*","dS","(","Ay",")",";","AD","=","u_ambient","*","AD",";","AD","=","AD","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AE","=","An","(","Aq",",","Ay",",","Az",",","AD",",","As",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AE","=","An","(","vec2","(","0.0",")",",","Ay",",","Az",",","AD",",","As",")",";"]}]}}]},{type:"textline",tokens:["AC","=","u_diffuse_intensity","*","AC",";","xh","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AC",",","AB",",","bC",",","Ay",",","Az",",","Ap",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","AF",",","AG",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","Az",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Av","=","clamp","(","SSS_STRENGTH","*","Av",",","0.0",",","1.0",")",";","AF","=","mix","(","AF",",","u_shallow_water_col",",","Av",")",";","AF","=","mix","(","AF",",","u_shore_water_col",",","Av",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AF","=","mix","(","AA",",","AF",",","Ax",")",";"]}]}}]},{type:"textline",tokens:["AF","=","mix","(","AF",",","AE",",","As",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["As","=","mix","(","Ao",".","g",",","Ao",".","r",",","max","(","4.0","*","(","Aw","-","0.75",")",",","0.0",")",")",";","As","=","mix","(","Ao",".","b",",","As",",","max","(","2.0","*","Aw","-","1.0",",","0.0",")",")",";","As","=","mix","(","0.0",",","As",",","Aw",")",";","AF","=","mix","(","AF",",","AD",",","As",")",";"]}]}}]},{type:"textline",tokens:["AF","+=","AG",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","uU","(","AF",",","At",",","u_cam_water_depth",")",";","}","else","{","va","(","AF",",","At",",","Az",",","1.0",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["va","(","AF",",","At",",","Az",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","AF",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","max","(","Au",",","AG",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Au","+=","As",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","AF",",","Au",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["AG","=","fwidth","(","Ab",")",";","AG","=","smoothstep","(","vec3","(","0.0",")",",","AG","*","zY",",","Ab",")",";","As","=","min","(","min","(","AG",".","x",",","AG",".","y",")",",","AG",".","z",")",";","As","=","clamp","(","As",",","0.0",",","1.0",")",";","AF","=","mix","(","u_wireframe_edge_color",",","AF",",","As",")",";","Au","=","mix","(","1.0",",","Au",",","As",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","AF",",","Au",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vb",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","zZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","z_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Aa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ab",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ag","(","in","vec2","zY",")","{","float","Ac",";","vec4","Ad",";","vec2","Ae",";","Ae","=","0.5","+","vec2","(","(","zY",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","zY",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Ad","=","texture2D","(","u_shore_dist_map",",","Ae",")",";","const","vec2","Af","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Ac","=","dot","(","Ad",".","ba",",","Af",")",";","Ae","=","normalize","(","Ad",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ae",",","Ac",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","As","(","inout","vec3","Ah",",","in","float","Ai",",","in","vec3","Aj",")","{","vec2","Ak",",","Al",",","Am",";","float","An",",","Ao",",","Ap",",","Aq",",","Ar",";","An","=","aU","(","DST_NOISE_SCALE_0","*","(","Ah",".","xz","+","DST_NOISE_FREQ_0","*","Ai",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","Ah",".","zx","-","DST_NOISE_FREQ_1","*","Ai",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Ap","=","Aj",".","b",";","Aq","=","sqrt","(","Ap",")",";","Ao","=","max","(","Ap",",","DIR_MIN_SHR_FAC",")","*","sin","(","Aq","/","Ao","+","DIR_FREQ","*","Ai",")",";","Ar","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","Ah",".","xz","+","DIR_NOISE_FREQ","*","Ai",")",")",",","DIR_MIN_NOISE_FAC",")",";","Ao","*=","Ar",";","Aq","=","WAVES_HEIGHT","*","mix","(","Ao",",","An",",","max","(","Aq",",","DST_MIN_FAC",")",")",";","Ak","=","Aj",".","rg",";","Ao","=","WAVES_HOR_FAC","*","Ao","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Ap",")",",","0.0",")",";","Ak","=","Ao","*","Ak",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","WAVES_HEIGHT","*","An",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","2.0","*","(","Ah",".","xz","-","0.1","*","Ai",")",";","Am","=","1.3","*","(","Ah",".","zx","+","0.03","*","Ai",")",";","An","=","ay","(","0.5","*","Al",")",".","x","+","ay","(","0.5","*","Am",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ah",".","xz","+=","Ak",";","An","*=","Ap",";"]}]}}]},{type:"textline",tokens:["Aq","+=","SMALL_WAVES_FAC","*","An",";"]}]}}]},{type:"textline",tokens:["Ah",".","y","+=","Aq",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","At",",","Au",";","vec2","Av",";","float","Aw",",","Ax",",","Ay",";","vec3","Az",",","AA",",","AB",",","AC",";","mat4","AD",",","AE",";","AD","=","O","(","u_view_tsr",")",";","AE","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","Ab","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ab","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ab","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Az","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","abs","(","Az",".","y",")",";","Av","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Aw",")",";","Az",".","y","=","WATER_LEVEL",";","Az",".","xz","+=","Av",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","AF","=","rB","(","Az",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AE",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Aa","=","Ag","(","AF",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","length","(","u_wind",")",";","Ay","=","u_time",";","Ay","*=","Ax",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","Aw",";","Az","=","AF",".","a","+","vec3","(","Aw",",","0.0",",","0.0",")",";","AA","=","AF",".","a","+","vec3","(","0.0",",","0.0",",","Aw",")",";","if","(","a_position",".","y","<","0.0",")","{","AF",".","a",".","y","=","WATER_LEVEL","-","1.0",";","Az",".","y","=","AF",".","a",".","y",";","AA",".","y","=","AF",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","AF",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Az","=","AF",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","AA","=","AF",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","Ag","(","Az",".","xz",")",";","AC","=","Ag","(","AA",".","xz",")",";","As","(","Az",",","Ay",",","AB",")",";","As","(","AA",",","Ay",",","AC",")",";","As","(","AF",".","a",",","Ay",",","Aa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","(","Az",",","Ay",",","vec3","(","0.0",")",")",";","As","(","AA",",","Ay",",","vec3","(","0.0",")",")",";","As","(","AF",".","a",",","Ay",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["Az","=","normalize","(","Az","-","AF",".","a",")",";","AA","=","normalize","(","AA","-","AF",".","a",")",";","bE","=","normalize","(","cross","(","AA",",","Az",")",")",";","Ay","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ay","=","clamp","(","0.8","-","Ay",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","Ay",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","AA",";","zZ","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","AF",".","a",";","vb","=","u_camera_eye","-","AF",".","a",";","At","=","AD","*","vec4","(","AF",".","a",",","1.0",")",";","Au","=","u_proj_matrix","*","At",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","Au",".","x",";","Aw","=","Au",".","y",";","Ax","=","Au",".","w",";","bG",".","x","=","(","Ay","+","Ax",")","/","2.0",";","bG",".","y","=","(","Aw","+","Ax",")","/","2.0",";","bG",".","z","=","Ax",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","At",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Au",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Ab",";","const","float","zY","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ac","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ac","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ad","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Ae","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Af","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Ag",",","Ah",";","vec3","Ai",",","Aj",";","Ai","=","vec3","(","0.0",")",";","Ag","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","sign","(","Ab","-","vec3","(","0.02","*","zY",")",")",";","if","(","Aj",".","x","<","0.0","||","Aj",".","y","<","0.0","||","Aj",".","z","<","0.0",")","{","Ai","=","Ac",";","Ag","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","sign","(","Ab","-","vec3","(","0.02","*","zY",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Aj",".","x","<","0.0","||","Aj",".","y","<","0.0","||","Aj",".","z","<","0.0",")","Ai","=","u_wireframe_edge_color",";","else","Ai","=","Af",";","Ag","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Aj",".","x","<","0.0","||","Aj",".","y","<","0.0","||","Aj",".","z","<","0.0",")","Ag","=","1.0",";","else","Ag","=","0.0",";","Ai","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Aj",".","x","<","0.0","||","Aj",".","y","<","0.0","||","Aj",".","z","<","0.0",")","Ai","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ai","=","Ad",";","else","Ai","=","Ae",";","Ag","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Aj","=","fwidth","(","Ab",")",";","Aj","=","smoothstep","(","vec3","(","0.0",")",",","Aj","*","zY",",","Ab",")",";","Ah","=","min","(","min","(","Aj",".","x",",","Aj",".","y",")",",","Aj",".","z",")",";","Ah","=","clamp","(","Ah",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ai","=","vec3","(","mix","(","u_wireframe_edge_color",",","Af",",","Ah",")",")",";","Ag","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ai","=","u_wireframe_edge_color",";","Ag","=","mix","(","1.0",",","0.0",",","Ah",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ai","=","mix","(","u_wireframe_edge_color",",","Ad",",","Ah",")",";","else","Ai","=","mix","(","u_wireframe_edge_color",",","Ae",",","Ah",")",";","Ag","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","Ai",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Ai",",","Ag",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ai",",","Ag",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","Ab",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","zY",",","Ac",",","Ad",",","Ae",",","Af",";","mat4","Ag",",","Ah",",","Ai",";","Ag","=","O","(","u_view_tsr",")",";","Ah","=","O","(","u_model_tsr",")",";","if","(","a_polyindex","==","0.0",")","Ab","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ab","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ab","=","vec3","(","0.0",",","0.0",",","1.0",")",";","zY","=","a_position",";","Ac","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","Aj","=","rB","(","zY",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ah",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["zY","=","mix","(","zY",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","vec3","(","0.0",")",";","Ae","=","vec3","(","0.0",")",";","sB","(","zY",",","Ad",",","Ae",",","Ac",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Aj","=","t_","(","zY",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ae",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Ag",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","(","Ah","*","vec4","(","Ae",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","ru","(","u_camera_eye",",","Ad",",","Ag",",","Ah",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","ro","(","u_camera_eye",",","Ad",",","Ag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","(","Ah","*","vec4","(","Ae",",","1.0",")",")",".","xyz",";","Ai","=","Ai","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Af",")",";"]}]}}]},{type:"textline",tokens:["c","Aj","=","rB","(","zY","-","Ae",",","Ae",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ai",")",";","Aj",".","b","=","Ad",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Aj","=","rB","(","zY",",","Ae",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ah",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","Aj",".","a",",","Aj",".","b",",","Ac",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","Ag","*","vec4","(","Aj",".","a",",","1.0",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Ae","(","float","zY",",","float","Ac",")","{","vec2","Ad",";","Ad","=","bM","+","vec2","(","zY",",","Ac",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Ad",")",";","}","vec4","Ar","(",")","{","vec2","Af",";","float","Ag",",","Ah",",","Ai",",","Aj",",","Ak",",","Al",";","vec4","Am",",","An",",","Ao",",","Ap",",","Aq",";","Am","=","Ae","(","-","1.0",",","-","1.0",")",";","An","=","Ae","(","1.0",",","-","1.0",")",";","Ao","=","Ae","(","-","1.0",",","1.0",")",";","Ap","=","Ae","(","1.0",",","1.0",")",";","Aq","=","Ae","(","0.0",",","0.0",")",";","Ag","=","bB","(","Aq",")",";","Ah","=","bB","(","Am",")",";","Ai","=","bB","(","An",")",";","Aj","=","bB","(","Ao",")",";","Ak","=","bB","(","Ap",")",";","Al","=","min","(","Ag",",","min","(","min","(","Ah",",","Ai",")",",","min","(","Aj",",","Ak",")",")",")",";","Ag","=","max","(","Ag",",","max","(","max","(","Ah",",","Ai",")",",","max","(","Aj",",","Ak",")",")",")",";","Af",".","x","=","-","(","(","Ah","+","Ai",")","-","(","Aj","+","Ak",")",")",";","Af",".","y","=","(","(","Ah","+","Aj",")","-","(","Ai","+","Ak",")",")",";","Ak","=","max","(","(","Ah","+","Ai","+","Aj","+","Ak",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Ak","=","1.0","/","(","min","(","abs","(","Af",".","x",")",",","abs","(","Af",".","y",")",")","+","Ak",")",";","Af","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Af","*","Ak",")",")","*","u_texel_size",";","Ap","=","0.5","*","(","texture2D","(","u_color",",","bM","+","Af","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","Af","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Ao","=","Ap","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","Af","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","Af","*","0.5",")",")",";","Ak","=","bB","(","Ao",")",";","if","(","(","Ak","<","Al",")","||","(","Ak",">","Ag",")",")","return","Ap",";","else","return","Ao",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Bi",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Ar","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Bi","=","u_texel_size",";","gl_FragColor","=","Bh","(","bM",",","u_color",",","Bi",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","zY",";","vec2","Ac",",","Ad",";","Ac","=","vec2","(","0.0",",","0.0",")",";","Ad","=","u_texel_size",";","zY","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","zY","*","0.0875447373698",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0858112354248",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0808139781061",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0731235112908",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0635705267419",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0530985673112",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0426125984122",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0328565115809",";","Ac","+=","Ad",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ac",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ac",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","zY",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","zY",",","Ac",";","zY","=","texture2D","(","u_main",",","bM",")",";","Ac","=","texture2D","(","u_bloom",",","bM",")",";","zY","=","zY",";","zY","+=","Ac",";","gl_FragColor","=","vec4","(","zY",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","zY",";","vec3","Ac",";","vec4","Ad",";","Ad","=","texture2D","(","u_color",",","bM",")",";","Ac","=","Ad",".","rgb",";","if","(","u_brightness","<","0.0",")","Ac","=","Ac","*","(","1.0","+","u_brightness",")",";","else","Ac","=","Ac","+","(","(","1.0","-","Ac",")","*","u_brightness",")",";","Ac","=","(","Ac","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Ac","*=","u_exposure",";","zY","=","bB","(","vec4","(","Ac",",","0.0",")",")",";","Ac","=","mix","(","vec3","(","zY",")",",","Ac",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Ac",",","Ad",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Bo","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","zY",",","Ac",";","vec4","Ad",",","Ae",";","Ad","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","zY","=","Bo","(","u_depth",",","bM",",","u_camera_range",")",";","zY","*=","u_view_max_depth",";","if","(","zY","<","u_dof_dist",")","Ac","=","(","u_dof_dist","-","zY",")","/","u_dof_front",";","else","Ac","=","(","zY","-","u_dof_dist",")","/","u_dof_rear",";","Ac","=","clamp","(","Ac",",","0.0",",","1.0",")",";","Ae","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","Ad",",","Ae",",","Ac",")",";","}","else","gl_FragColor","=","Ad",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","zY",";","vec4","Ac",",","Ad",",","Ae",";","Ac","=","texture2D","(","u_src_color",",","bM",")",";","Ad","=","texture2D","(","u_glow_mask_small",",","bM",")",";","Ae","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","Ac",";","if","(","Ae",".","a","!=","0.0",")","{","zY","=","u_glow_mask_large_coeff","*","Ae",".","a",";","zY","=","clamp","(","zY",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ae",".","rgb","/","Ae",".","a",",","zY",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zY",")",";","}","if","(","Ad",".","a","!=","0.0",")","{","zY","=","u_glow_mask_small_coeff","*","Ad",".","a",";","zY","=","clamp","(","zY",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ad",".","rgb","/","Ad",".","a",",","zY",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zY",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Bp",";","varying","vec2","Bq",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Br",";","void","main","(",")","{","vec4","Bs",";","float","Bt",",","Bu",",","Bv",",","Bw",",","Bx",";","vec2","By",",","Bz",",","BA",";","By","=","(","Br",".","xy","-","bM",")",";","Bt","=","length","(","By",")",";","By","=","u_radial_blur_step","*","By","/","Bt",";","Bu","=","Bt","/","u_radial_blur_step",";","By","*=","min","(","Bu",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Bu","=","max","(","Bu",",","STEPS_PER_PASS",")",";","Bz","=","bM",";","Bv","=","0.0",";","for","(","float","BB","=","0.0",";","BB","<","STEPS_PER_PASS",";","BB","+=","1.0",")","{","if","(","BB","<=","Bu",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Bw","=","Bo","(","u_input",",","Bz",",","u_camera_range",")",";","Bv","+=","max","(","(","1.0","-","pow","(","Bt",",","0.3",")",")","*","step","(","0.9",",","Bw",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Bs","=","texture2D","(","u_input",",","Bz",")",";","Bv","+=","Z","(","Bs",")",";"]}]}}]},{type:"textline",tokens:["}","Bz","+=","By",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BA","=","bM","+","Bq",";","Bx","=","ay","(","vec2","(","2.5","*","(","BA",".","x",")",",","2.5","*","(","BA",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","BA",".","x",")","-","0.66","*","u_time",",","5.0","*","(","BA",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","BA",".","x",")","+","0.33","*","u_time",",","7.5","*","(","BA",".","y",")","-","0.33","*","u_time",")",")",";","Bx","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Bt",")",",","0.0",",","1.0",")","*","Bp",";","Bv","=","max","(","Bx",",","Bv",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","Bv","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Bp",";","varying","vec2","Bq",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Br",";","void","main","(",")","{","float","zY",",","Ac",";","vec3","Ad",";","bM","=","a_bb_vertex","+","0.5",";","Ad","=","normalize","(","u_sun_direction",")",";","Br","=","u_view_proj_matrix","*","vec4","(","Ad",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Bp","=","1.0",";","Ad","=","vec3","(","0.0",",","1.0",",","0.0",")",";","Ad","=","i","(","u_camera_quat",",","Ad",")",";","Ad","=","normalize","(","Ad",")",";","zY","=","dot","(","Ad",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ac","=","atan","(","Ad",".","x",",","Ad",".","z",")",";","Bq","=","vec2","(","-","Ac",",","acos","(","zY",")",")",";","}","else","{","Bp","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Br",".","xy","=","0.5","*","(","Br",".","xy","/","Br",".","w","+","1.0",")",";","Br","+=","99999.0","*","step","(","Br",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","zY",";","vec3","Ac",";","vec4","Ad",";","Ad","=","texture2D","(","u_main",",","bM",")",";","Ac","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","Ad",".","rgb",")",";","zY","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","Ac","=","Ad",".","rgb","+","u_god_rays_intensity","*","vec3","(","zY",")","*","Ac",";","bu","(","Ac",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ac",",","max","(","0.01",",","Ad",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ac",",","Ad",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","zY",";","vec4","Ac",";","Ac","=","texture2D","(","u_input",",","bM",")",";","zY","=","dot","(","Ac",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","zY",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","zY",",","Ac",";","Ac","=","0.0",";","for","(","float","Ad","=","0.025",";","Ad","<","1.0",";","Ad","+=","0.05",")","for","(","float","Ae","=","0.025",";","Ae","<","1.0",";","Ae","+=","0.05",")","{","zY","=","max","(","texture2D","(","u_input",",","vec2","(","Ad",",","Ae",")",")",".","r",",","0.01",")",";","Ac","+=","log","(","zY",")",";","}","Ac","=","exp","(","Ac","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Ac",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","Bs",";","void","main","(",")","{","vec4","Bt",";","float","Bu",",","Bv",";","Bu","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Bv","=","texture2D","(","u_luminance",",","bM",")",".","r",";","Bt","=","texture2D","(","u_main",",","bM",")",";","Bu","=","Bv","/","Bu",";","Bv","=","u_bloom_edge_lum",";","gl_FragColor","=","Bt","*","max","(","Bu","-","Bv",",","0.0",")","*","Bs",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","Bs",";","const","vec3","zY","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Aj","(","in","vec4","Ac",",","in","vec3","Ad",",","out","vec3","Ae",")","{","float","Af",",","Ag",",","Ah",",","Ai",";","Af","=","Ac",".","w","*","Ad",".","x","+","Ac",".","y","*","Ad",".","z","-","Ac",".","z","*","Ad",".","y",";","Ag","=","Ac",".","w","*","Ad",".","y","+","Ac",".","z","*","Ad",".","x","-","Ac",".","x","*","Ad",".","z",";","Ah","=","Ac",".","w","*","Ad",".","z","+","Ac",".","x","*","Ad",".","y","-","Ac",".","y","*","Ad",".","x",";","Ai","=","-","Ac",".","x","*","Ad",".","x","-","Ac",".","y","*","Ad",".","y","-","Ac",".","z","*","Ad",".","z",";","Ae",".","x","=","Af","*","Ac",".","w","-","Ai","*","Ac",".","x","-","Ag","*","Ac",".","z","+","Ah","*","Ac",".","y",";","Ae",".","y","=","Ag","*","Ac",".","w","-","Ai","*","Ac",".","y","-","Ah","*","Ac",".","x","+","Af","*","Ac",".","z",";","Ae",".","z","=","Ah","*","Ac",".","w","-","Ai","*","Ac",".","z","-","Af","*","Ac",".","y","+","Ag","*","Ac",".","x",";","}","void","main","(",")","{","vec3","Ak",";","bM","=","2.0","*","a_position",";","Aj","(","u_camera_quat",",","zY",",","Ak",")",";","Bs","=","dot","(","-","Ak",",","u_sun_direction",")","*","u_bloom_key",";","Bs","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","zY","=","0.0042",";","void","main","(",")","{","vec4","Ac",",","Ad",",","Ae",",","Af",";","Ac","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","Ad","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","Ac","-","Ad",")",">","u_motion_blur_decay_threshold",")","{","Ae","=","(","1.0","-","u_motion_blur_exp",")","*","Ac","+","u_motion_blur_exp","*","Ad",";","Ae","=","Ae","-","Ad",";","Af","=","Ac","-","Ad",";","Ae","=","min","(","max","(","abs","(","Ae",")",",","vec4","(","zY",")",")",",","abs","(","Af",")",")","*","sign","(","Ae",")",";","gl_FragColor","=","Ad","+","Ae",";","}","else","{","gl_FragColor","=","Ac",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","zY",";","float","Ac",";","vec4","Ad",",","Ae",",","Af",";","Ad","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","Ad",";","if","(","u_draw_outline","!=","0.0",")","{","Ae","=","texture2D","(","u_outline_mask",",","bM",")",";","Af","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","Ac","=","Af",".","a","-","Ae",".","a",";","if","(","Ac","!=","0.0",")","{","Ac","=","smoothstep","(","0.0",",","1.0",",","Af",".","a",")",";","if","(","Ae",".","a","==","0.0",")","{","zY","=","u_outline_color",";","bu","(","zY",")",";","Ae","=","vec4","(","clamp","(","zY",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Ad",",","Ae",",","Ac",")",";","}","}","}","}"]}]},exports["postprocessing/performance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","zY",";","zY","=","vec4","(","0.0",")",";","for","(","int","Ac","=","0",";","Ac","<","100",";","Ac","++",")","zY","+=","0.001","*","texture2D","(","u_color",",","bM","+","vec2","(","0.001","*","vec2","(","Ac",")",")",")",";","gl_FragColor","=","zY",";","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","zY",",","Ac",",","Ad",",","Ae",";","vec2","Af",",","Ag",";","vec4","Ah",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Ah",".","r","+","Ah",".","g","+","Ah",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","vec2","(","0.0",",","0.0",")",";","Ag","=","u_texel_size",";","Ah","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Ah","*","0.2270270270",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","0.1945945946",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","0.1945945946",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","0.1216216216",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","0.1216216216",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","0.0540540541",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","0.0540540541",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","0.0162162162",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","vec2","(","0.0",",","0.0",")",";","Ag","=","u_texel_size",";","Ah","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.152507",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.141763",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.141763",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.113861",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.113861",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.079019",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.079019",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.047383",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.047383",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.024549",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.024549",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.01099",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.01099",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.00425",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.00425",";","Af","+=","Ag",";","Ah","=","texture2D","(","u_color",",","bM","+","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.00142",";","Ah","=","texture2D","(","u_color",",","bM","-","Af",")",";","gl_FragColor","+=","Ah","*","(","1.0","-","step","(","0.0",",","-","Ah",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","u_texel_size",";","Ah","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Ah",";","if","(","Ah",".","a","==","0.0",")","{","Ah","=","texture2D","(","u_color",",","bM","+","Ag",")",";","if","(","Ah",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Ah",".","a",")",";","else","{","Ah","=","texture2D","(","u_color",",","bM","-","Ag",")",";","if","(","Ah",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Ah",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zY","=","u_delta","[","0","]",";","Ac","=","u_delta","[","1","]",";","Ad","=","1.0","/","3.0",";","Ae","=","0.5",";","Ag","=","vec2","(","Ad",",","Ae",")",";","if","(","u_tex_number","==","0",")","{","Af","=","bM","*","Ag","+","vec2","(","2.0","*","Ad",",","0.0",")",";","Af","[","0","]","=","min","(","Af","[","0","]",",","1.0","-","zY",")",";","Af","[","1","]","=","min","(","Af","[","1","]",",","0.5","-","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Ad","-","Af","[","0","]",",","Af","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Af","=","bM","*","Ag",";","Af","[","0","]","=","max","(","Af","[","0","]",",","zY",")",";","Af","[","1","]","=","min","(","Af","[","1","]",",","0.5","-","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ad","-","Af","[","0","]",",","Af","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Af","=","bM","*","Ag","+","vec2","(","Ad",",","Ae",")",";","Af","[","0","]","=","max","(","Af","[","0","]",",","Ad","+","zY",")",";","Af","[","0","]","=","min","(","Af","[","0","]",",","2.0","*","Ad","-","zY",")",";","Af","[","1","]","=","min","(","Af","[","1","]",",","1.0","-","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Af","[","0","]",",","3.0","*","Ae","-","Af","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Af","=","bM","*","Ag","+","vec2","(","0.0",",","Ae",")",";","Af","[","0","]","=","min","(","Af","[","0","]",",","Ad","-","zY",")",";","Af","[","1","]","=","min","(","Af","[","1","]",",","1.0","-","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Af","[","0","]",",","3.0","*","Ae","-","Af","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Af","=","bM","*","Ag","+","vec2","(","Ad",",","0.0",")",";","Af","[","0","]","=","max","(","Af","[","0","]",",","Ad","+","zY",")",";","Af","[","0","]","=","min","(","Af","[","0","]",",","2.0","*","Ad","-","zY",")",";","Af","[","1","]","=","min","(","Af","[","1","]",",","0.5","-","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Af","[","0","]",",","Af","[","1","]",")",")",";","}","else","{","Ag","=","bM","*","Ag","+","vec2","(","2.0","*","Ad",",","Ae",")",";","Ag","[","0","]","=","min","(","Ag","[","0","]",",","1.0","-","zY",")",";","Ag","[","1","]","=","max","(","Ag","[","1","]",",","0.5","+","Ac",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Ad","-","Ag","[","0","]",",","Ag","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bu",";","varying","vec4","Bv",";","varying","vec4","Bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BD","(","vec2","By",",","sampler2D","Bz",")","{","float","BA",",","BB",",","BC",";","BA","=","texture2D","(","Bz",",","By",")",".","r",";","BB","=","texture2D","(","Bz",",","Bu",".","xy",")",".","r",";","BC","=","texture2D","(","Bz",",","Bu",".","zw",")",".","r",";","return","vec3","(","BA",",","BB",",","BC",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","BI","(","vec2","BE",",","sampler2D","BF",")","{","vec2","BG",";","vec3","BH",";","BH","=","BD","(","BE",",","BF",")",";","BG","=","abs","(","BH",".","xx","-","BH",".","yz",")",";","BG","=","step","(","SMAA_PREDICATION_THRESHOLD",",","BG",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","BG",")",";","}"]}]}}]},{type:"textline",tokens:["void","BM","(","bvec2","BJ",",","inout","vec2","BK",",","vec2","BL",")","{","if","(","BJ",".","x",")","BK",".","x","=","BL",".","x",";","if","(","BJ",".","y",")","BK",".","y","=","BL",".","y",";","}","void","BM","(","bvec4","BN",",","inout","vec4","BO",",","vec4","BP",")","{","BM","(","BN",".","xy",",","BO",".","xy",",","BP",".","xy",")",";","BM","(","BN",".","zw",",","BO",".","zw",",","BP",".","zw",")",";","}","vec2","BR","(","vec2","BQ",")","{","return","sign","(","BQ",")","*","floor","(","abs","(","BQ",")","+",".5",")",";","}","vec4","BR","(","vec4","BS",")","{","return","sign","(","BS",")","*","floor","(","abs","(","BS",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ce","(","vec2","BT",",","sampler2D","BU"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","BV"]}]}}]},{type:"textline",tokens:[")","{","vec4","BW",";","float","BX",",","BY",",","BZ",",","B_",",","Ca",";","vec3","Cb",";","vec2","Cc",",","Cd",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Cc","=","BI","(","BT",",","BV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cc","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Cb","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","BX","=","dot","(","texture2D","(","BU",",","BT",")",".","rgb",",","Cb",")",";","BY","=","dot","(","texture2D","(","BU",",","Bu",".","xy",")",".","rgb",",","Cb",")",";","BZ","=","dot","(","texture2D","(","BU",",","Bu",".","zw",")",".","rgb",",","Cb",")",";","BW",".","xy","=","abs","(","BX","-","vec2","(","BY",",","BZ",")",")",";","Cc","=","step","(","Cc",",","BW",".","xy",")",";","if","(","dot","(","Cc",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","B_","=","dot","(","texture2D","(","BU",",","Bv",".","xy",")",".","rgb",",","Cb",")",";","Ca","=","dot","(","texture2D","(","BU",",","Bv",".","zw",")",".","rgb",",","Cb",")",";","BW",".","zw","=","abs","(","BX","-","vec2","(","B_",",","Ca",")",")",";","Cd","=","max","(","BW",".","xy",",","BW",".","zw",")",";","Ca","=","dot","(","texture2D","(","BU",",","Bw",".","xy",")",".","rgb",",","Cb",")",";","B_","=","dot","(","texture2D","(","BU",",","Bw",".","zw",")",".","rgb",",","Cb",")",";","BW",".","zw","=","abs","(","vec2","(","BY",",","BZ",")","-","vec2","(","Ca",",","B_",")",")",";","Cd","=","max","(","Cd",".","xy",",","BW",".","zw",")",";","B_","=","max","(","Cd",".","x",",","Cd",".","y",")",";","Cc",".","xy","*=","step","(","B_",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","BW",".","xy",")",";","return","Cc",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cg","(","vec2","Cf",")","{","Cf",".","r","=","Cf",".","r","*","abs","(","5.0","*","Cf",".","r","-","5.0","*","0.75",")",";","return","BR","(","Cf",")",";","}","vec4","Cg","(","vec4","Ch",")","{","Ch",".","rb","=","Ch",".","rb","*","abs","(","5.0","*","Ch",".","rb","-","5.0","*","0.75",")",";","return","BR","(","Ch",")",";","}","vec2","Cp","(","sampler2D","Ci",",","vec2","Cj",",","vec2","Ck",",","out","vec2","Cl",")","{","vec3","Cm",";","vec4","Cn",";","Cn","=","vec4","(","Cj",",","-","1.0",",","1.0",")",";","Cm","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Co","=","0",";","Co","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Co","++",")","{","if","(","Cn",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cn",".","w",">","0.9",")","{","Cn",".","xyz","+=","Cm","*","vec3","(","Ck",",","1.0",")",";","Cl","=","texture2D","(","Ci",",","Cn",".","xy",",","0.0",")",".","rg",";","Cn",".","w","=","dot","(","Cl",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cn",".","zw",";","}","vec2","Cx","(","sampler2D","Cq",",","vec2","Cr",",","vec2","Cs",",","out","vec2","Ct",")","{","vec3","Cu",";","vec4","Cv",";","Cv","=","vec4","(","Cr",",","-","1.0",",","1.0",")",";","Cv",".","x","+=","0.25","*","u_texel_size",".","x",";","Cu","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Cw","=","0",";","Cw","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Cw","++",")","{","if","(","Cv",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cv",".","w",">","0.9",")","{","Cv",".","xyz","=","Cu","*","vec3","(","Cs",",","1.0",")","+","Cv",".","xyz",";","Ct","=","texture2D","(","Cq",",","Cv",".","xy",",","0.0",")",".","rg",";","Ct","=","Cg","(","Ct",")",";","Cv",".","w","=","dot","(","Ct",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cv",".","zw",";","}","vec2","CD","(","sampler2D","Cy",",","vec2","Cz",",","vec2","CA",",","float","CB",")","{","vec2","CC",";","CC","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","CA","+","Cz",";","CC","=","SMAA_AREATEX_PIXEL_SIZE","*","CC","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","CC",".","x","+=","0.5",";","CC",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","CB",";","return","texture2D","(","Cy",",","CC",",","0.0",")",".","rg",";","}","vec2","CP","(","sampler2D","CE",",","sampler2D","CF",",","vec2","CG",",","vec2","CH",",","vec4","CI",")","{","vec4","CJ",",","CK",",","CL",";","vec2","CM",",","CN",",","CO",";","CM","=","vec2","(","0.0",",","0.0",")",";","if","(","CH",".","r",">","0.0",")","{","CJ",".","xz","=","Cp","(","CE",",","CG",",","vec2","(","-","1.0",",","1.0",")",",","CN",")",";","CJ",".","x","+=","float","(","CN",".","y",">","0.9",")",";","}","else","CJ",".","xz","=","vec2","(","0.0",",","0.0",")",";","CJ",".","yw","=","Cp","(","CE",",","CG",",","vec2","(","1.0",",","-","1.0",")",",","CN",")",";","if","(","CJ",".","x","+","CJ",".","y",">","2.0",")","{","CK","=","vec4","(","-","CJ",".","x","+","0.25",",","CJ",".","x",",","CJ",".","y",",","-","CJ",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","CG",".","xyxy",";","CL",".","xy","=","texture2D","(","CE",",","CK",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","CL",".","zw","=","texture2D","(","CE",",","CK",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","CL",".","yxwz","=","Cg","(","CL",".","xyzw",")",";","CO","=","vec2","(","2.0",",","2.0",")","*","CL",".","xz","+","CL",".","yw",";","BM","(","bvec2","(","step","(","0.9",",","CJ",".","zw",")",")",",","CO",",","vec2","(","0.0",",","0.0",")",")",";","CM","+=","CD","(","CF",",","CJ",".","xy",",","CO",",","CI",".","z",")",";","}","CJ",".","xz","=","Cx","(","CE",",","CG",",","vec2","(","-","1",",","-","1",")",",","CN",")",";","if","(","texture2D","(","CE",",","CG","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","CJ",".","yw","=","Cx","(","CE",",","CG",",","vec2","(","1",",","1",")",",","CN",")",";","CJ",".","y","+=","float","(","CN",".","y",">","0.9",")",";","}","else","CJ",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","CJ",".","x","+","CJ",".","y",">","2.0",")","{","CL","=","vec4","(","-","CJ",".","x",",","-","CJ",".","x",",","CJ",".","y",",","CJ",".","y",")","*","u_texel_size",".","xyxy","+","CG",".","xyxy",";","CK",".","x","=","texture2D","(","CE",",","CL",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","CK",".","y","=","texture2D","(","CE",",","CL",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","CK",".","zw","=","texture2D","(","CE",",","CL",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","CN","=","vec2","(","2.0",",","2.0",")","*","CK",".","xz","+","CK",".","yw",";","BM","(","bvec2","(","step","(","0.9",",","CJ",".","zw",")",")",",","CN",",","vec2","(","0",",","0",")",")",";","CM","+=","CD","(","CF",",","CJ",".","xy",",","CN",",","CI",".","w",")",".","gr",";","}","return","CM",";","}"]}]}}]},{type:"textline",tokens:["float","CV","(","sampler2D","CQ",",","vec2","CR",",","float","CS",")","{","vec2","CT",",","CU",";","CT","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","CU","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","CS",",","1.0",")",";","CT","+=","vec2","(","-","1.0",",","1.0",")",";","CU","+=","vec2","(","0.5",",","-","0.5",")",";","CT","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","CU","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","CQ",",","CT","*","CR","+","CU",",","0.0",")",".","r",";","}","float","Dc","(","sampler2D","CW",",","sampler2D","CX",",","vec2","CY",",","float","CZ",")","{","float","C_",";","vec2","Da",";","Da","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Db","=","0",";","Db","<","SMAA_MAX_SEARCH_STEPS",";","Db","++",")","{","if","(","CY",".","x",">","CZ","&&","Da",".","g",">","0.8281","&&","Da",".","r","==","0.0",")","{","Da","=","texture2D","(","CW",",","CY",",","0.0",")",".","rg",";","CY","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","CY",";","}","}","C_","=","-","(","255.0","/","127.0",")","*","CV","(","CX",",","Da",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","C_","+","CY",".","x",";","}","float","Dk","(","sampler2D","Dd",",","sampler2D","De",",","vec2","Df",",","float","Dg",")","{","float","Dh",";","vec2","Di",";","Di","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Dj","=","0",";","Dj","<","SMAA_MAX_SEARCH_STEPS",";","Dj","++",")","{","if","(","Df",".","x","<","Dg","&&","Di",".","g",">","0.8281","&&","Di",".","r","==","0.0",")","{","Di","=","texture2D","(","Dd",",","Df",",","0.0",")",".","rg",";","Df","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Df",";","}","}","Dh","=","-","(","255.0","/","127.0",")","*","CV","(","De",",","Di",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Dh","+","Df",".","x",";","}","float","Ds","(","sampler2D","Dl",",","sampler2D","Dm",",","vec2","Dn",",","float","Do",")","{","float","Dp",";","vec2","Dq",";","Dq","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Dr","=","0",";","Dr","<","SMAA_MAX_SEARCH_STEPS",";","Dr","++",")","{","if","(","Dn",".","y",">","Do","&&","Dq",".","r",">","0.8281","&&","Dq",".","g","==","0.0",")","{","Dq","=","texture2D","(","Dl",",","Dn",",","0.0",")",".","rg",";","Dn","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Dn",";","}","}","Dp","=","-","(","255.0","/","127.0",")","*","CV","(","Dm",",","Dq",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Dp","+","Dn",".","y",";","}","float","DA","(","sampler2D","Dt",",","sampler2D","Du",",","vec2","Dv",",","float","Dw",")","{","float","Dx",";","vec2","Dy",";","Dy","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Dz","=","0",";","Dz","<","SMAA_MAX_SEARCH_STEPS",";","Dz","++",")","{","if","(","Dv",".","y","<","Dw","&&","Dy",".","r",">","0.8281","&&","Dy",".","g","==","0.0",")","{","Dy","=","texture2D","(","Dt",",","Dv",",","0.0",")",".","rg",";","Dv","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Dv",";","}","}","Dx","=","-","(","255.0","/","127.0",")","*","CV","(","Du",",","Dy",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Dx","+","Dv",".","y",";","}","vec2","DH","(","sampler2D","DB",",","vec2","DC",",","float","DD",",","float","DE",",","float","DF",")","{","vec2","DG",";","DG","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","BR","(","4.0","*","vec2","(","DD",",","DE",")",")","+","DC",";","DG","=","SMAA_AREATEX_PIXEL_SIZE","*","DG","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","DG",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","DF","+","DG",".","y",";","return","texture2D","(","DB",",","DG",",","0.0",")",".","rg",";","}","void","DO","(","sampler2D","DI",",","inout","vec2","DJ",",","vec4","DK",",","vec2","DL",")","{","vec2","DM",",","DN",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DM","=","step","(","DL",".","xy",",","DL",".","yx",")",";","DN","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DM",";","DN","/=","DM",".","x","+","DM",".","y",";","DM","=","vec2","(","1.0",",","1.0",")",";","DM",".","x","-=","DN",".","x","*","texture2D","(","DI",",","DK",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","DM",".","x","-=","DN",".","y","*","texture2D","(","DI",",","DK",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","DM",".","y","-=","DN",".","x","*","texture2D","(","DI",",","DK",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","DM",".","y","-=","DN",".","y","*","texture2D","(","DI",",","DK",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","DJ","*=","clamp","(","DM",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","DV","(","sampler2D","DP",",","inout","vec2","DQ",",","vec4","DR",",","vec2","DS",")","{","vec2","DT",",","DU",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DT","=","step","(","DS",".","xy",",","DS",".","yx",")",";","DU","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DT",";","DU","/=","DT",".","x","+","DT",".","y",";","DT","=","vec2","(","1.0",",","1.0",")",";","DT",".","x","-=","DU",".","x","*","texture2D","(","DP",",","DR",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","DT",".","x","-=","DU",".","y","*","texture2D","(","DP",",","DR",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","DT",".","y","-=","DU",".","x","*","texture2D","(","DP",",","DR",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","DT",".","y","-=","DU",".","y","*","texture2D","(","DP",",","DR",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","DQ","*=","clamp","(","DT",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ei","(","vec2","DW",",","vec2","DX",",","sampler2D","DY",",","sampler2D","DZ",",","sampler2D","D_",",","vec4","Ea",")","{","float","Eb",",","Ec",";","vec3","Ed",";","vec2","Ee",",","Ef",",","Eg",";","vec4","Eh",";","Eh","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Ee","=","texture2D","(","DY",",","DW",")",".","rg",";","if","(","Ee",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Eh",".","rg","=","CP","(","DY",",","DZ",",","DW",",","Ee",",","Ea",")",";","if","(","Eh",".","r","==","-","Eh",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Ed",".","x","=","Dc","(","DY",",","D_",",","Bu",".","xy",",","Bw",".","x",")",";","Ed",".","y","=","Bv",".","y",";","Ef",".","x","=","Ed",".","x",";","Eb","=","texture2D","(","DY",",","Ed",".","xy",",","0.0",")",".","r",";","Ed",".","z","=","Dk","(","DY",",","D_",",","Bu",".","zw",",","Bw",".","y",")",";","Ef",".","y","=","Ed",".","z",";","Ef","=","abs","(","BR","(","Ef","/","u_texel_size",".","xx","-","DX",".","xx",")",")",";","Eg","=","sqrt","(","Ef",")",";","Ec","=","texture2D","(","DY",",","Ed",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Eh",".","rg","=","DH","(","DZ",",","Eg",",","Eb",",","Ec",",","Ea",".","y",")",";","Ed",".","y","=","DW",".","y",";","DO","(","DY",",","Eh",".","rg",",","Ed",".","xyzy",",","Ef",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Ee",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Ee",".","r",">","0.0",")","{",";","Ed",".","y","=","Ds","(","DY",",","D_",",","Bv",".","xy",",","Bw",".","z",")",";","Ed",".","x","=","Bu",".","x",";","Ee",".","x","=","Ed",".","y",";","Ec","=","texture2D","(","DY",",","Ed",".","xy",",","0.0",")",".","g",";","Ed",".","z","=","DA","(","DY",",","D_",",","Bv",".","zw",",","Bw",".","w",")",";","Ee",".","y","=","Ed",".","z",";","Ee","=","abs","(","BR","(","Ee","/","u_texel_size",".","yy","-","DX",".","yy",")",")",";","Ef","=","sqrt","(","Ee",")",";","Eb","=","texture2D","(","DY",",","Ed",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Eh",".","ba","=","DH","(","DZ",",","Ef",",","Ec",",","Eb",",","Ea",".","x",")",";","Ed",".","x","=","DW",".","x",";","DV","(","DY",",","Eh",".","ba",",","Ed",".","xyxz",",","Ee",")",";","}","return","Eh",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Eu","(","vec2","Ej",",","sampler2D","Ek",",","sampler2D","El"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Em"]}]}}]},{type:"textline",tokens:[")","{","bool","En",";","vec2","Eo",",","Ep",",","Eq",";","vec4","Er",",","Es",",","Et",";","Er",".","x","=","texture2D","(","El",",","Bt",".","xy",")",".","a",";","Er",".","y","=","texture2D","(","El",",","Bt",".","zw",")",".","g",";","Er",".","wz","=","texture2D","(","El",",","Ej",")",".","xz",";","if","(","dot","(","Er",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Es","=","texture2D","(","Ek",",","Ej",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Et","=","texture2D","(","Em",",","bM",")",";","Eo","=","2.0","*","ag","(","Et",")","-","1.0",";","Es",".","a","=","sqrt","(","2.0","*","length","(","Eo",")",")",";"]}]}}]},{type:"textline",tokens:["return","Es",";","}","else","{","En","=","max","(","Er",".","x",",","Er",".","z",")",">","max","(","Er",".","y",",","Er",".","w",")",";","Es","=","vec4","(","0.0",",","Er",".","y",",","0.0",",","Er",".","w",")",";","Eo","=","Er",".","yw",";","BM","(","bvec4","(","En",",","En",",","En",",","En",")",",","Es",",","vec4","(","Er",".","x",",","0.0",",","Er",".","z",",","0.0",")",")",";","BM","(","bvec2","(","En",",","En",")",",","Eo",",","Er",".","xz",")",";","Eo","/=","dot","(","Eo",",","vec2","(","1.0",",","1.0",")",")",";","Es","=","Es","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Ej",".","xyxy",";","Er","=","Eo",".","x","*","texture2D","(","Ek",",","Es",".","xy",",","0.0",")",";","Er","+=","Eo",".","y","*","texture2D","(","Ek",",","Es",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Et","=","texture2D","(","Em",",","Es",".","xy",")",";","Ep","=","2.0","*","ag","(","Et",")","-","1.0",";","Eq","=","Eo",".","x","*","Ep",";","Et","=","texture2D","(","Em",",","Es",".","zw",")",";","Ep","=","2.0","*","ag","(","Et",")","-","1.0",";","Eq","+=","Eo",".","y","*","Ep",";","Er",".","a","=","sqrt","(","2.0","*","length","(","Eq",")",")",";"]}]}}]},{type:"textline",tokens:["return","Er",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","EE","(","vec2","Ev",",","sampler2D","Ew",",","sampler2D","Ex"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ey"]}]}}]},{type:"textline",tokens:[")","{","float","Ez",";","vec2","EA",";","vec4","EB",",","EC",",","ED",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["EB","=","texture2D","(","Ey",",","bM",")",";","EA","=","2.0","*","ag","(","EB",")","-","1.0",";","EB","=","texture2D","(","Ew",",","Ev",")",";","EC","=","texture2D","(","Ex",",","Ev","-","EA",")",";","Ez","=","abs","(","EB",".","a","*","EB",".","a","-","EC",".","a","*","EC",".","a",")","/","2.0",";","Ez","=","0.5","*","clamp","(","1.0","-","sqrt","(","Ez",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","ED","=","mix","(","EB",",","EC",",","Ez",")",";","ED",".","a","=","1.0",";","return","ED",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EB","=","texture2D","(","Ew",",","Ev",")",";","EC","=","texture2D","(","Ex",",","Ev",")",";","return","mix","(","EB",",","EC",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","EF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","vec4","(","Ce","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","Ei","(","bM",",","Bx",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","Eu","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","vec4","(","EE","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EF","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","EF",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bu",";","varying","vec4","Bv",";","varying","vec4","Bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ac","(","vec2","zY",")","{","Bu","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","zY",".","xyxy",";","Bv","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","zY",".","xyxy",";","Bw","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","zY",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Af","(","vec2","Ad",",","out","vec2","Ae",")","{","Ae","=","Ad","/","u_texel_size",";","Bu","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Ad",".","xyxy",";","Bv","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Ad",".","xyxy",";","Bw","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Bu",".","xz",",","Bv",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ah","(","vec2","Ag",")","{","Bt","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Ag",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ac","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","(","bM",",","Bx",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Ac","(","in","vec2","zY",")","{","return","Bo","(","u_depth",",","zY",",","u_camera_range",")",";","}","void","main","(",")","{","float","Ad",",","Ae",",","Af",",","Ag",",","Ah",",","Ai",";","vec3","Aj",",","Ak",",","Al",",","Am",";","Aj","=","texture2D","(","u_color",",","bM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Aj",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Ak","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","Ad","=","Ac","(","bM",")",";","Ae","=","Ad","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","An","=","8.0",";","const","int","Ao","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","An","=","16.0",";","const","int","Ao","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","An","=","24.0",";","const","int","Ao","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","An","=","32.0",";","const","int","Ao","=","4",";"]}]}}]},{type:"textline",tokens:["Af","=","u_ssao_radius_increase","*","0.001",";","const","float","Ap","=","1.0","+","2.4","/","An",";","Ag","=","0.0",";","for","(","int","Aq","=","0",";","Aq","<","Ao",";","Aq","++",")","for","(","int","Ar","=","-","1",";","Ar","<=","1",";","Ar","+=","2",")","for","(","int","By","=","-","1",";","By","<=","1",";","By","+=","2",")","for","(","int","Bz","=","-","1",";","Bz","<=","1",";","Bz","+=","2",")","{","Al","=","reflect","(","normalize","(","vec3","(","Ar",",","By",",","Bz",")",")",",","Ak",")","*","(","Af","*=","Ap",")",";","Am","=","vec3","(","bM",",","Ae",")",";","Am","+=","vec3","(","Al",".","xy",",","Al",".","z","*","Ae","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Am",".","z","-=","1.4","*","(","Am",".","z","-","Ae",")","*","step","(","Ae",",","Am",".","z",")",";"]}]}}]},{type:"textline",tokens:["Ah","=","Ac","(","Am",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Ai","=","clamp","(","(","Ae","-","Ah",")","/","Ah",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ag","+=","mix","(","1.0",",","Ai",",","step","(","Ah",",","Am",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ag","+=","mix","(","step","(","Am",".","z",",","Ah",")",",","0.5",",","Ai",")",";"]}]}}]},{type:"textline",tokens:["}","Ag","=","Ag","/","An",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","clamp","(","Ag","*","Ag","+","0.6","*","Ag",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","clamp","(","Ag","*","Ag","+","Ag",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Ad","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Ad",")",";","Ag","=","mix","(","1.0",",","Ag",",","Ad",")",";","gl_FragColor","=","vec4","(","Aj",",","Ag",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Ac","(","in","vec2","zY",")","{","return","Bo","(","u_depth",",","zY",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Ad",",","Ae",";","float","Af",",","Ag",",","Ah",",","Ai",",","Aj",",","Ak",",","Al",";","Af","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","Ac","(","bM",")",";","Ah","=","0.0",";","Ai","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Ad","=","vec2","(","-","2.0",")",";","for","(","int","Am","=","0",";","Am","<","4",";","++","Am",")","{","for","(","int","An","=","0",";","An","<","4",";","++","An",")","{","Ae","=","(","Ad","+","vec2","(","float","(","Am",")",",","float","(","An",")",")",")","*","u_texel_size",";","Aj","=","texture2D","(","u_ssao_mask",",","bM","+","Ae",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","Ac","(","bM","+","Ae",")",";","Al","=","1.0","-","clamp","(","abs","(","Ak","-","Ag",")","*","Ai",",","0.0",",","1.0",")",";","Af","+=","Aj","*","Al",";","Ah","+=","Al",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Af","+=","Aj",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Af","/","Ah",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Af","/","16.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/stereo.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_distortion_params",";","uniform","int","u_enable_hmd_stereo",";","vec2","Af","(","vec2","zY",",","vec2","Ac",")","{","float","Ad",";","vec2","Ae",";","Ae","=","(","zY","-","Ac",")","*","vec2","(","2.0",")",";","Ad","=","Ae",".","x","*","Ae",".","x","+","Ae",".","y","*","Ae",".","y",";","Ae","=","Ae","*","(","1.0","+","u_distortion_params","[","0","]","*","Ad","+","u_distortion_params","[","1","]","*","Ad","*","Ad",")",";","return","Ae","*","vec2","(","0.5",")","*","u_distortion_params","[","2","]","+","Ac",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Ag",";","mat3","Ah",",","Ai",";","vec3","Aj",",","Ak",";","vec4","Al",",","Am",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","texture2D","(","u_sampler_left",",","bM",")",";","Am","=","texture2D","(","u_sampler_right",",","bM",")",";","Aj","=","vec3","(","Al","[","0","]",",","Al","[","1","]",",","Al","[","2","]",")",";","br","(","Aj",")",";","Ak","=","vec3","(","Am","[","0","]",",","Am","[","1","]",",","Am","[","2","]",")",";","br","(","Ak",")",";","Ah","=","mat3","(","0.437",",","-","0.062",",","-","0.048",",","0.449",",","-","0.062",",","-","0.050",",","0.164",",","-","0.024",",","-","0.017",")",";","Ai","=","mat3","(","-","0.011",",","0.377",",","-","0.026",",","-","0.032",",","0.761",",","-","0.093",",","-","0.007",",","0.009",",","1.234",")",";","Ak","=","clamp","(","Ah","*","Aj",",","0.0",",","1.0",")","+","clamp","(","Ai","*","Ak",",","0.0",",","1.0",")",";","bu","(","Ak",")",";","gl_FragColor","=","vec4","(","Ak",",","Al","[","3","]","+","Am","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_enable_hmd_stereo","!=","0",")","{","if","(","bM","[","0","]","<","0.5",")","{","Ag","=","Af","(","vec2","(","2.0","*","bM","[","0","]",",","bM","[","1","]",")",",","vec2","(","0.5","+","u_distortion_params","[","3","]","*","0.5",",","0.5",")",")",";","if","(","clamp","(","Ag",",","vec2","(","0.0",")",",","vec2","(","1.0",")",")","!=","Ag",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","Ag",")",";","}","}","else","{","Ag","=","Af","(","vec2","(","2.0","*","(","bM","[","0","]","-","0.5",")",",","bM","[","1","]",")",",","vec2","(","0.5","-","u_distortion_params","[","3","]","*","0.5",",","0.5",")",")",";","if","(","clamp","(","Ag",",","vec2","(","0.0",")",",","vec2","(","1.0",")",")","!=","Ag",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_right",",","Ag",")",";","}","}","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","bM",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","zY",";","vec4","Ac",",","Ad",";","float","Ae",";","Ae","=","texture2D","(","u_depth",",","bM",")",".","x",";","Ac","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","Ae","-","1.0",",","1.0",")",";","Ad","=","u_view_proj_inverse","*","Ac",";","Ad","=","Ad","/","Ad",".","w",";","Ad","=","u_view_proj_prev","*","Ad",";","Ad","/=","Ad",".","w",";","zY","=","(","Ac",".","xy","-","Ad",".","xy",")","/","4.0","+","0.5",";","zY","=","clamp","(","zY",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","zY",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","1.0",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"var",name:"SUN_NUM",tokens:["0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","vec4","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","[","SUN_NUM","]","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bN","=","0.1",";","const","float","bO","=","0.1",";","const","float","bP","=","-","0.01",";","const","float","bQ","=","0.05",";","vec4","bR","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bS","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bT","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bU","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bV","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bW","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bX","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bY","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ca","(","vec2","bZ",",","float","b_",")","{","return","all","(","lessThanEqual","(","bZ",",","vec2","(","1.0","+","b_",")",")",")","&&","all","(","greaterThanEqual","(","bZ",",","vec2","(","0.0","-","b_",")",")",")",";","}","float","cj","(","float","cb",",","float","cc",",","mat2","cd",",","vec3","ce",",","float","cf",",","PRECISION","sampler2D","cg",")","{","vec2","ch",",","ci",";","ci",".","x","=","cb",";","ci",".","y","=","cc",";","ci","=","cd","*","ci",";","ch","=","ce",".","xy","+","ci","*","cf","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ca","(","ch",",","bP",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ce",".","z",",","texture2D","(","cg",",","ch",")",".","r",")",";","}","float","cs","(","vec3","ck",",","PRECISION","sampler2D","cl",",","float","cm",")","{","mat2","cn",";","float","co",",","cp",",","cq",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ck",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["ck",".","z","=","clamp","(","ck",".","z",",","0.0",",","1.0",")",";","co","=","0.0",";","cp","=","aY","(","ck",".","xy",")",".","x","*","M_PI",";","cq","=","cos","(","cp",")",";","cp","=","sin","(","cp",")",";","cn","=","mat2","(","cq",",","cp",",","-","cp",",","cq",")",";","for","(","int","cr","=","0",";","cr","<","4",";","cr","++",")","{","co","+=","cj","(","bR","[","cr","]",",","bV","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bS","[","cr","]",",","bW","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bT","[","cr","]",",","bX","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bU","[","cr","]",",","bY","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","}","co","/=","16.0",";","return","clamp","(","co",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","cH","(","vec3","ct",",","PRECISION","sampler2D","cu",",","vec3","cv",",","PRECISION","sampler2D","cw",",","float","cx",",","float","cy",",","float","cz",")","{","mat2","cA",";","float","cB",",","cC",",","cD",",","cE",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cv",".","z","=","clamp","(","cv",".","z",",","0.0",",","1.0",")",";","cB","=","0.0",";","cC","=","0.0",";","cD","=","aY","(","ct",".","xy",")",".","x","*","M_PI",";","cE","=","cos","(","cD",")",";","cD","=","sin","(","cD",")",";","cA","=","mat2","(","cE",",","cD",",","-","cD",",","cE",")",";","for","(","int","cF","=","0",";","cF","<","4",";","cF","++",")","{","cB","+=","cj","(","bR","[","cF","]",",","bV","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bS","[","cF","]",",","bW","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bT","[","cF","]",",","bX","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bU","[","cF","]",",","bY","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","}","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","cj","(","bR","[","cG","]",",","bV","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bS","[","cG","]",",","bW","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bT","[","cG","]",",","bX","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bU","[","cG","]",",","bY","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","}","cB","=","mix","(","cB",",","cC",",","cz",")",";","cB","/=","16.0",";","return","clamp","(","cB",",","0.0",",","1.0",")",";","}","float","cL","(","vec2","cI",")","{","float","cJ",",","cK",";","cJ","=","min","(","cI",".","x",",","cI",".","y",")",";","cK","=","min","(","1.0","-","cI",".","x",",","1.0","-","cI",".","y",")",";","return","min","(","cJ",",","cK",")",";","}","float","cO","(","float","cM",",","float","cN",")","{","if","(","cN",">=","0.0","&&","cN","<=","bO",")","cM","=","(","cM","-","1.0",")","/","bO","*","cN","+","1.0",";","return","cM",";","}","float","cZ","(","vec3","cP",",","vec3","cQ",",","PRECISION","sampler2D","cR",",","PRECISION","sampler2D","cS",",","float","cT",",","float","cU",",","float","cV",",","float","cW",")","{","float","cX",",","cY",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cY","=","cL","(","cP",".","xy",")",";","if","(","-","cW",">","cV","&&","cY",">=","0.0","&&","cY","<=","bN","&&","ca","(","cQ",".","xy",",","0.0",")",")","{","cY","=","1.0","-","cY","/","bN",";","cX","=","cH","(","cP",",","cR",",","cQ",",","cS",",","cT",",","cU",",","cY",")",";","}","else"]}]}}]},{type:"textline",tokens:["cX","=","cs","(","cP",",","cR",",","cT",")",";","return","cX",";","}","float","dg","(","vec3","c_",",","PRECISION","sampler2D","da",",","float","db",",","float","dc",",","float","dd",")","{","float","de",",","df",";","de","=","cs","(","c_",",","da",",","db",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dd",">","dc",")","{","df","=","cL","(","c_",".","xy",")",";","de","=","cO","(","de",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["return","de",";","}","vec4","dr","(","float","dh",")","{","vec3","di",",","dj",",","dk",",","dl",";","float","dm",",","dn",",","dp",",","dq",";","dm","=","1.0",";","di","=","bI",".","xyz","/","bI",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bJ",".","xyz","/","bJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bK",".","xyz","/","bK",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bL",".","xyz","/","bL",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","0.0",")",")","{","dm","=","cZ","(","di",",","dj",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","bQ",")",")","{","dm","=","dg","(","di",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dj",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dj",",","dk",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dk",",","dl",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dl",".","xy",",","0.0",")",")","dm","=","dg","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","cs","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dp","=","cs","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dp","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","cs","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dq","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","vec4","(","dm",",","dn",",","dp",",","dq",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","du","(","inout","vec3","ds",")","{","vec4","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"l_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ds","*=","dt",".","a",";"]}]}}]},{type:"textline",tokens:["return","dt",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dr","(","bD",".","z",")",";","return","dt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xz","*","ej",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fn",qualifier:["float"],is_optional:true},{type:"node_out",name:"fo",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fm"],statements:[{type:"textline",tokens:["fm","=","normalize","(","fd",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fn"],statements:[{type:"textline",tokens:["fn","=","abs","(","fd",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fo"],statements:[{type:"textline",tokens:["fo","=","length","(","fd",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fp",qualifier:["float"],is_optional:false},{type:"node_in",name:"fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"fr",qualifier:["float"],is_optional:false},{type:"node_out",name:"fs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fs","=","vec3","(","fp",",","fq",",","fr",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","eu","(","vec3","(","ft",",","fu",",","fv",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fx","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fy","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fz",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fz","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fB","=","eA",";","br","(","fB",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fC",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["fC","=","eB",";","br","(","fC",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fD",qualifier:["float"],is_optional:false},{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fD","=","eC","[","0","]",";","fE","=","eC","[","1","]",";","br","(","fD",")",";","br","(","fE",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fF",qualifier:["float"],is_optional:false},{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fF","=","eD","[","0","]",";","fG","=","eD","[","1","]",";","fH","=","eD","[","2","]",";","br","(","fF",")",";","br","(","fG",")",";","br","(","fH",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fI","=","fg",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","eM",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fL","[","0","]","=","fd","[","0","]",";","fL","[","1","]","=","fd","[","1","]",";","fL","[","2","]","=","fd","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","vec3","(","fh",".","r",",","-","fh",".","b",",","fh",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["float"],is_optional:false},{type:"node_out",name:"fU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fN","=","vec3","(","ZERO_VALUE_NODES",")",";","fO","=","vec3","(","ZERO_VALUE_NODES",")",";","fP","=","vec3","(","ZERO_VALUE_NODES",")",";","fQ","=","vec3","(","ZERO_VALUE_NODES",")",";","fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","ZERO_VALUE_NODES",";","fU","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fV",qualifier:["float"],is_optional:false},{type:"node_in",name:"fW",qualifier:["float"],is_optional:false},{type:"node_in",name:"fX",qualifier:["float"],is_optional:false},{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fj","=","eq","(","fZ",")",";","fj","[","0","]","+=","(","fV","-","eh",")",";","if","(","fj","[","0","]",">","UNITY_VALUE_NODES",")","fj","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fj","[","0","]","<","ZERO_VALUE_NODES",")","fj","[","0","]","+=","UNITY_VALUE_NODES",";","fj","*=","vec3","(","UNITY_VALUE_NODES",",","fW",",","fX",")",";","fj","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",")",")",",","step","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","f_","=","mix","(","fZ",",","eu","(","fj",")",",","fY",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gc","=","mix","(","gb",",","vec3","(","UNITY_VALUE_NODES",")","-","gb",",","ga",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gf",qualifier:["float"],is_optional:false},{type:"node_out",name:"gg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fe","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fj","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fk","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","eX","=","fe",".","z",";","if","(","eX","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["ge","=","fk","-","bC",";","gf","=","length","(","ge",")",";","ge","=","normalize","(","ge",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","eX","/","(","eX","+","gf","*","gf",")",";","eX","=","fe",".","x",";","eY","=","fe",".","y",";","if","(","eX",">","-","UNITY_VALUE_NODES",")","{","eZ","=","dot","(","ge",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","eX",")","/","eY",")",";","gg","*=","eZ",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ge"],statements:[{type:"textline",tokens:["ge","=","fj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","length","(","fk","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gj",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","-","dot","(","gh",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gl","=","-","(","eN","*","vec4","(","gk",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gn",qualifier:["float"],is_optional:false},{type:"node_in",name:"go",qualifier:["float"],is_optional:false},{type:"node_in",name:"gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gs","=","gm",";"]},{type:"textline",tokens:["gn",";","go",";","gp",";","gq",";","gr",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gu",qualifier:["float"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gt",";"]},{type:"textline",tokens:["gu",";","gv",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["float"],is_optional:false},{type:"node_in",name:"gA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gB","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";","gA",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gC",";"]},{type:"textline",tokens:["gD",";","gE",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["float"],is_optional:false},{type:"node_in",name:"gJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"gK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gK","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";","gJ",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gL",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gP","=","gN",";"]},{type:"textline",tokens:["gO",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gR",qualifier:["float"],is_optional:false},{type:"node_in",name:"gS",qualifier:["float"],is_optional:false},{type:"node_in",name:"gT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gU","[","0","]","=","gU","[","1","]","=","gU","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gQ",";","gR",";","gS",";","gT",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["float"],is_optional:false},{type:"node_in",name:"gY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gZ","=","gV",";"]},{type:"textline",tokens:["gW",";","gX",";","gY",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","g_",";"]},{type:"textline",tokens:["ha",";","hb",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hg",qualifier:["float"],is_optional:false},{type:"node_in",name:"hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"hi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hj","[","0","]","=","hj","[","1","]","=","hj","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hd",";","hf",";","hg",";","hh",";","hi",";","he",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_out",name:"hm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hm","=","hk",";"]},{type:"textline",tokens:["hl",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ho",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ho","[","0","]","=","ho","[","1","]","=","ho","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hn",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hp","[","0","]","=","hp","[","1","]","=","hp","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hr",qualifier:["float"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hq",";","hr",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ht",";","hu",";","hv",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hB","=","hA",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hE","=","hD",";"]},{type:"textline",tokens:["hC",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hG","[","0","]","=","hG","[","1","]","=","hG","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hF",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hH",qualifier:["float"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","[","0","]","=","hI","[","1","]","=","hI","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hH",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hK","[","0","]","=","hK","[","1","]","=","hK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hJ",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hM",qualifier:["float"],is_optional:false},{type:"node_out",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hM","=","hL","[","0","]",";","hN","=","hL","[","1","]",";","hO","=","hL","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["float"],is_optional:false},{type:"node_in",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hS","[","0","]","=","hP",";","hS","[","1","]","=","hQ",";","hS","[","2","]","=","hR",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","hU","-","hV","*","eh",";","hW","=","max","(","(","UNITY_VALUE_NODES","+","hV",")","*","hT","+","eZ",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hX",qualifier:["float"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_out",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hZ","=","h_","=","ia","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hX",";","hY",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ib",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";","id","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ib",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ie",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ig",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ig","[","0","]","=","ig","[","1","]","=","ig","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ie",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","[","0","]","=","ii","[","1","]","=","ii","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ih",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ik",qualifier:["float"],is_optional:false},{type:"node_in",name:"il",qualifier:["float"],is_optional:false},{type:"node_in",name:"im",qualifier:["float"],is_optional:false},{type:"node_out",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ip",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["io","[","0","]","=","io","[","1","]","=","io","[","2","]","=","ZERO_VALUE_NODES",";","ip","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";","ik",";","il",";","im",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_in",name:"is",qualifier:["float"],is_optional:false},{type:"node_in",name:"it",qualifier:["float"],is_optional:false},{type:"node_in",name:"iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"iv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iv","[","0","]","=","iv","[","1","]","=","iv","[","2","]","=","ZERO_VALUE_NODES",";","iw","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iq",";","ir",";","is",";","it",";","iu",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"ix",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ix",";","iy",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_in",name:"iF",qualifier:["float"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_out",name:"iI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","[","0","]","=","iI","[","1","]","=","iI","[","2","]","=","ZERO_VALUE_NODES",";","iJ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";","iD",";","iE",";","iF",";","iG",";","iH",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iL","[","0","]","=","iL","[","1","]","=","iL","[","2","]","=","ZERO_VALUE_NODES",";","iM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iK",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iO",qualifier:["float"],is_optional:false},{type:"node_in",name:"iP",qualifier:["float"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iQ","[","0","]","=","iQ","[","1","]","=","iQ","[","2","]","=","ZERO_VALUE_NODES",";","iR","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iN",";","iO",";","iP",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iV",qualifier:["float"],is_optional:false},{type:"node_out",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iW","[","0","]","=","iW","[","1","]","=","iW","[","2","]","=","ZERO_VALUE_NODES",";","iX","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iS",";","iT",";","iU",";","iV",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ja",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_in",name:"jc",qualifier:["float"],is_optional:false},{type:"node_in",name:"jd",qualifier:["float"],is_optional:false},{type:"node_in",name:"je",qualifier:["float"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_out",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jg","[","0","]","=","jg","[","1","]","=","jg","[","2","]","=","ZERO_VALUE_NODES",";","jh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iY",";","iZ",";","i_",";","ja",";","jb",";","jc",";","jd",";","je",";","jf",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jk","=","clamp","(","ji","+","jj",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","jl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jo","=","eZ","*","jm","+","(","UNITY_VALUE_NODES","-","eZ",")","*","jn",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jp"],statements:[{type:"textline",tokens:["jp","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jq"],statements:[{type:"textline",tokens:["jq","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jr","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["js","=","fi",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jt","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","[","0","]","=","ju","[","1","]","=","ju","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jv","[","0","]","=","fd","[","0","]",";","jv","[","1","]","=","fd","[","1","]",";","jv","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","[","0","]","=","jw","[","1","]","=","jw","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","jx","[","1","]","=","jx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jy","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jz",qualifier:["float"],is_optional:false},{type:"node_out",name:"jA",qualifier:["float"],is_optional:false},{type:"node_out",name:"jB",qualifier:["float"],is_optional:false},{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","=","ZERO_VALUE_NODES",";","jA","=","ZERO_VALUE_NODES",";","jB","=","ZERO_VALUE_NODES",";","jC","=","vec3","(","ZERO_VALUE_NODES",")",";","jD","=","ZERO_VALUE_NODES",";","jE","=","jC",";","jF","=","jC",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jG",qualifier:["float"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jG","=","ZERO_VALUE_NODES",";","jH","=","ZERO_VALUE_NODES",";","jI","=","ZERO_VALUE_NODES",";","jJ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","ZERO_VALUE_NODES",";","jK","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","jO",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jQ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jR",qualifier:["float"],is_optional:false},{type:"node_in",name:"jS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false},{type:"node_out",name:"jU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jU","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jS",";","jR",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jV","=","jW","=","jX","=","ZERO_VALUE_NODES",";","jY","=","jZ","=","j_","=","ZERO_VALUE_NODES",";","ka","=","ka","=","kc","=","kd","=","ZERO_VALUE_NODES",";","kb","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ke",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ke","=","kf","=","vec3","(","ZERO_VALUE_NODES",")",";","kg","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kj","=","ki",";"]},{type:"textline",tokens:["kh",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["km","=","kl",";"]},{type:"textline",tokens:["kk",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ko","[","0","]","=","ko","[","1","]","=","ko","[","2","]","=","clamp","(","kn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","kp","=","ko","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kq",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kr","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kr",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kr","=","kr","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kr","=","kr","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kr","=","max","(","kr",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kr","=","min","(","kr",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kr","=","normalize","(","kr",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ks",qualifier:["float"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ku","=","ks","+","kt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ku","=","clamp","(","ku",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kv","-","kw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kx","=","clamp","(","kx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","ky","*","kz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kA","=","clamp","(","kA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_out",name:"kD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","(","kC","!=","ZERO_VALUE_NODES",")","?","kB","/","kC",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kD","=","clamp","(","kD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kG","=","sin","(","kE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kG","=","clamp","(","kG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kF",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kJ","=","cos","(","kH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kJ","=","clamp","(","kJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kI",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kM","=","tan","(","kK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kM","=","clamp","(","kM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kL",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","(","kN","<=","UNITY_VALUE_NODES","&&","kN",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kP","=","clamp","(","kP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kO",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_out",name:"kS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","(","kQ","<=","UNITY_VALUE_NODES","&&","kQ",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kQ",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kS","=","clamp","(","kS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kR",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_out",name:"kV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kV","=","atan","(","kT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kV","=","clamp","(","kV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kU",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kW","<","ZERO_VALUE_NODES","&&","kX","!=","floor","(","kX",")",")","kY","=","ZERO_VALUE_NODES",";","else","if","(","kX","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["kY","=","UNITY_VALUE_NODES",";","else","if","(","kW","<","ZERO_VALUE_NODES",")","kY","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","kX",",","2.0",")",")",")","*","pow","(","-","kW",",","kX",")",";","else","if","(","kW","==","ZERO_VALUE_NODES",")","kY","=","ZERO_VALUE_NODES",";","else","kY","=","pow","(","kW",",","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kY","=","clamp","(","kY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_out",name:"la",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["la","=","(","kZ",">","ZERO_VALUE_NODES","&&","k_",">","ZERO_VALUE_NODES",")","?","log2","(","kZ",")","/","log2","(","k_",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["la","=","clamp","(","la",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_out",name:"ld",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","min","(","lb",",","lc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ld","=","clamp","(","ld",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_out",name:"lg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","max","(","le",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lg","=","clamp","(","lg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_out",name:"lj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lj","=","floor","(","lh","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lj","=","clamp","(","lj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["li",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lm","=","(","lk","<","ll",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lm","=","clamp","(","lm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_out",name:"lp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","(","ln",">","lo",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lp","=","clamp","(","lp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ls",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","abs","(","lr",")",">","0.000001","?","mod","(","lq",",","lr",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ls","=","clamp","(","ls",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_out",name:"lv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lv","=","abs","(","lt",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lv","=","clamp","(","lv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lu",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_in",name:"lx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ly",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lz","=","mix","(","lx",",","ly",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lB","+","lC",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","*","lG",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","-","lK",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","lP","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","eY",")","+","eZ","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lO",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","lS","+=","step","(","lS",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lT","=","eY","*","lR","+","eZ","*","lR","/","lS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lX","=","mix","(","lV",",","abs","(","lV","-","lW",")",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","min","(","lZ",".","rgb",",","l_",".","rgb","*","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","max","(","mc",".","rgb",",","md",".","rgb","*","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eZ",")",";","mi","=","mix","(","mg","*","(","fk","+","2.0","*","eZ","*","mh",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fk","+","2.0","*","eZ","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mh",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mg",")",",","step","(","eh",",","mg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES",")","-","eZ","*","ml",";","fj","=","clamp","(","mk","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mm","=","mix","(","mix","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mk",",","step","(","mk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eZ",")",";","fk","=","fk","+","eZ","*","mp",";","fj","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","mo",")","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","fj",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","ms",";","fj","=","eq","(","mt",")",";","if","(","fj",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mu",")",";","fk",".","x","=","fj",".","x",";","fl","=","eu","(","fk",")",";","mu","=","mix","(","mu",",","fl",",","eZ",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","my","=","mw",";","fl","=","eq","(","my",")",";","if","(","fl",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mx",")",";","fl",".","y","=","eY","*","fl",".","y","+","eZ","*","fk",".","y",";","my","=","eu","(","fl",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","fl","=","eq","(","mA",")",";","fk","=","eq","(","mB",")",";","fl",".","z","=","eY","*","fl",".","z","+","eZ","*","fk",".","z",";","mC","=","eu","(","fl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mG","=","mE",";","fk","=","eq","(","mF",")",";","if","(","fk",".","y","!=","ZERO_VALUE_NODES",")","{","fl","=","eq","(","mG",")",";","fl",".","x","=","fk",".","x",";","fl",".","y","=","fk",".","y",";","fj","=","eu","(","fl",")",";","mG","=","mix","(","mG",",","fj",",","eZ",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","fj","=","mJ","+","mI","-","mJ","*","mI",";","mK","=","mI","*","(","vec3","(","eY",")","+","vec3","(","eZ",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mI",")","*","mJ","+","fj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mO","=","mM","+","eZ","*","(","2.0","*","mN","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","mP",";","eS","=","mQ",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mV",qualifier:["float"],is_optional:true},{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"]},{type:"node_param",name:"eJ",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["mY","=","clamp","(","mR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["mZ","=","eJ","[","0","]","*","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["m_","=","normalize","(","mU",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","fi",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mW","=","mV","*","mY",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","eV","*","mY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["mY","*=","mT",";"]}]}]},{type:"textline",tokens:["mX","=","eW","*","u_environment_energy","*","dS","(","m_",")",";","nc","=","du","(","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["na","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nb","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eR","=","nc",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","vec3","(","ZERO_VALUE_NODES",")",";","mX","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ne",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ng",qualifier:["float"],is_optional:true},{type:"node_in",name:"nh",qualifier:["float"],is_optional:true},{type:"node_in",name:"ni",qualifier:["float"],is_optional:true},{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nk",qualifier:["float"],is_optional:true},{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"]},{type:"node_param",name:"eL",qualifier:["float"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nj"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nj","=","nd",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nj","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nj","+=","ne",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nl"],statements:[{type:"textline",tokens:["nl","=","nf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","nd",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"textline",tokens:["nn","=","ne",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","ni",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eZ","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","nh",";","nk","=","clamp","(","ni","*","(","UNITY_VALUE_NODES","-","eZ",")","+","eZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eZ","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","eL",";","nk","=","eK","*","(","UNITY_VALUE_NODES","-","eZ",")","+","eZ",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eP","=","ne",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eQ","=","nf",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"no",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"np",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nr",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nr","=","vec4","(","no","+","nq","*","np",",","ZERO_VALUE_NODES",")",";","ns","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nt",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nx","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nx","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nw","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["nw","*=","nt","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_positions","[","LAMP_IND","]",";","nu","=","fj","-","fh",";"]},{type:"textline",tokens:["eZ","=","length","(","nu",")",";","nw","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","eZ","*","eZ",")",";","nu","=","normalize","(","nu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_directions","[","LAMP_IND","]",";","eZ","=","dot","(","nu",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nw","*=","eZ",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nu","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","ZERO_VALUE_NODES",";","if","(","nz",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nB",")","*","dot","(","nA",",","ny",")","+","nB",";","if","(","nC","[","0","]","==","ZERO_VALUE_NODES",")","{","nD","=","UNITY_VALUE_NODES",";","}","else","{","eZ","=","UNITY_VALUE_NODES","+","abs","(","eZ",")",";","eZ","=","nC","[","1","]","+","(","UNITY_VALUE_NODES","-","nC","[","1","]",")","*","pow","(","eZ",",","nC","[","0","]",")",";","nD","=","clamp","(","eZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nD","=","max","(","nD",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nI","=","ZERO_VALUE_NODES",";","if","(","nF",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nH",")","*","dot","(","nG",",","nE",")","+","nH",";","nI","=","max","(","eZ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["float"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nO","=","ZERO_VALUE_NODES",";","if","(","nK",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nM",")","*","dot","(","nL",",","nJ",")","+","nM",";","if","(","nN","[","0","]",">","ZERO_VALUE_NODES",")","{","eY","=","max","(","dot","(","nL",",","eM",")",",","ZERO_VALUE_NODES",")",";","eX","=","nN","[","0","]","*","nN","[","0","]",";","e_","=","UNITY_VALUE_NODES","-","eh","*","(","eX","/","(","eX","+","0.33",")",")",";","fj","=","nJ","-","eZ","*","nL",";","fl","=","eM","-","eY","*","nL",";"]},{type:"textline",tokens:["if","(","length","(","fj",")","==","ZERO_VALUE_NODES","||","length","(","fl",")","==","ZERO_VALUE_NODES","||","abs","(","eZ",")",">","UNITY_VALUE_NODES","||","abs","(","eY",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nO","=","eZ","*","e_",";","else","{","fa","=","acos","(","eZ",")",";","eY","=","acos","(","eY",")",";","fj","=","normalize","(","fj",")",";","fl","=","normalize","(","fl",")",";","fb","=","max","(","fa",",","eY",")",";","fc","=","min","(","fa",",","eY",")",";","fc","*=","0.95",";","eY","=","max","(","dot","(","fj",",","fl",")",",","ZERO_VALUE_NODES",")",";","eX","=","0.45","*","(","eX","/","(","eX","+","0.09",")",")",";","nO","=","eZ","*","(","e_","+","(","eX","*","eY","*","sin","(","fb",")","*","tan","(","fc",")",")",")",";","}","}","else","nO","=","eZ",";","nO","=","max","(","nO",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nU","=","ZERO_VALUE_NODES",";","if","(","nQ",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nS",")","*","dot","(","nR",",","nP",")","+","nS",";","fc","=","max","(","dot","(","nR",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nT","[","0","]","<=","UNITY_VALUE_NODES",")","nU","=","eZ","*","pow","(","max","(","fc","*","eZ",",","0.1",")",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nU","=","eZ","*","pow","(","1.0001","-","fc",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","nU","=","max","(","nU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["float"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"n_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["n_","=","ZERO_VALUE_NODES",";","if","(","nW",".","r","!=","ZERO_VALUE_NODES",")","{","fc","=","(","UNITY_VALUE_NODES","-","nY",")","*","dot","(","nX",",","nV",")","+","nY",";","fc","=","acos","(","fc",")",";","if","(","fc","<","nZ","[","0","]",")","n_","=","UNITY_VALUE_NODES",";","else","if","(","fc",">","(","nZ","[","0","]","+","nZ","[","1","]",")","||","nZ","[","1","]","==","ZERO_VALUE_NODES",")","n_","=","ZERO_VALUE_NODES",";","else","n_","=","UNITY_VALUE_NODES","-","(","(","fc","-","nZ","[","0","]",")","/","nZ","[","1","]",")",";","n_","=","max","(","n_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"of",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["of","=","ZERO_VALUE_NODES",";","if","(","ob",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","oa","+","eM",")",";","of","=","(","UNITY_VALUE_NODES","-","od",")","*","max","(","dot","(","oc",",","fl",")",",","ZERO_VALUE_NODES",")","+","od",";","of","=","pow","(","of",",","oe","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ok",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ok","=","ZERO_VALUE_NODES",";","if","(","oh",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","og","+","eM",")",";","fc","=","max","(","dot","(","oi",",","fl",")",",","0.001",")",";"]},{type:"textline",tokens:["eZ","=","max","(","dot","(","oi",",","eM",")",",","0.01",")",";","fb","=","max","(","dot","(","oi",",","og",")",",","0.01",")",";","fc","=","tan","(","acos","(","fc",")",")",";","eY","=","max","(","oj","[","0","]",",","0.001",")",";","ok","=","fb","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","eY","*","eY",")",")","*","(","exp","(","-","(","fc","*","fc",")","/","(","eY","*","eY",")",")","/","(","sqrt","(","eZ","*","fb",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"ol",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"op",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["op","=","ZERO_VALUE_NODES",";","if","(","om",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","ol","+","eM",")",";","fb","=","acos","(","dot","(","fl",",","on",")",")",";","if","(","fb","<","oo","[","0","]",")","op","=","UNITY_VALUE_NODES",";","else","if","(","fb",">=","oo","[","0","]","+","oo","[","1","]","||","oo","[","1","]","==","ZERO_VALUE_NODES",")","op","=","ZERO_VALUE_NODES",";","else","op","=","UNITY_VALUE_NODES","-","(","fb","-","oo","[","0","]",")","/","oo","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ov",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","ZERO_VALUE_NODES",";","if","(","or",".","g","==","UNITY_VALUE_NODES",")","{","if","(","ou","[","0","]","<","UNITY_VALUE_NODES","||","ou","[","1","]","==","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","if","(","ou","[","1","]","<","100.0",")","ou","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","ou","[","1","]",")",";","else","ou","[","1","]","=","10.0","/","ou","[","1","]",";","fl","=","normalize","(","eM","+","oq",")",";","fb","=","(","UNITY_VALUE_NODES","-","ot",")","*","max","(","dot","(","os",",","fl",")",",","ZERO_VALUE_NODES",")","+","ot",";","if","(","fb","<","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","eZ","=","max","(","dot","(","os",",","eM",")",",","0.01",")",";","eY","=","dot","(","os",",","oq",")",";","if","(","eY","<=","0.01",")","ov","=","ZERO_VALUE_NODES",";","else","{","fc","=","max","(","dot","(","eM",",","fl",")",",","0.01",")",";","eX","=","UNITY_VALUE_NODES",";","eZ","=","(","2.0","*","fb","*","eZ",")","/","fc",";","eY","=","(","2.0","*","fb","*","eY",")","/","fc",";","eY","=","min","(","min","(","eX",",","eZ",")",",","eY",")",";","eZ","=","sqrt","(","pow","(","ou","[","0","]",",","2.0",")","+","pow","(","fc",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fc","=","pow","(","eZ","-","fc",",","2.0",")","/","pow","(","eZ","+","fc",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fc","*","(","eZ","+","fc",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fc","*","(","eZ","-","fc",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","fb","=","acos","(","fb",")",";","ov","=","max","(","fc","*","eY","*","exp","(","-","pow","(","fb",",","2.0",")","/","(","2.0","*","pow","(","ou","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"ow",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["float"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oA",",","oB",")","*","dot","(","eM",",","oB",")","<","ZERO_VALUE_NODES",")","{","fb","=","oC",".","x",";","eY","=","oC",".","y",";","fc","=","oC",".","z",";","eZ","=","oC",".","w",";"]},{type:"textline",tokens:["eX","=","clamp","(","abs","(","dot","(","oA",",","oB",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","e_","=","clamp","(","dot","(","eM",",","-","oA",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","pow","(","e_",",","eY",")",";"]},{type:"textline",tokens:["oH","=","ow","+","oG","*","vec4","(","oF","*","eX","*","pow","(","oD",",","vec3","(","fb",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oH","+=","fc","*","mix","(","vec4","(","oD",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","eZ",")","*","oG","*","vec4","(","oF","*","eX","*","vec3","(","eY",")",",","UNITY_VALUE_NODES",")",";","oI","=","ox",";","}","else","{"]},{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oJ","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oL","=","dot","(","oK",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oN",qualifier:["float"],is_optional:true},{type:"node_out",name:"oO",qualifier:["float"],is_optional:true},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oN"],statements:[{type:"textline",tokens:["oN","=","oM",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oO"],statements:[{type:"textline",tokens:["oO","=","oM",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","oM",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fl","=","eq","(","oQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","fl",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","fl",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","fl",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_out",name:"oX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oX","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oU","-","oW",")","*","oV",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"o_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["o_","=","oY",";","if","(","o_",".","x",">","ZERO_VALUE_NODES",")","o_",".","x","=","pow","(","oY",".","x",",","oZ",")",";","if","(","o_",".","y",">","ZERO_VALUE_NODES",")","o_",".","y","=","pow","(","oY",".","y",",","oZ",")",";","if","(","o_",".","z",">","ZERO_VALUE_NODES",")","o_",".","z","=","pow","(","oY",".","z",",","oZ",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pa",")",";","pb","=","pow","(","pb",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pc",")",";","pd","=","pow","(","pd",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pg",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pe","[","2","]","=","pe","[","1","]","=","pe","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pf","[","2","]","=","pf","[","1","]","=","pf","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pg","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"ph",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pj",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["fe","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","ph",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","=","fe",".","xyz",";","br","(","pi",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","=","fe",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["float"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pr",qualifier:["float"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","fe",".","xyz",";","br","(","po",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pl",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fe",".","xyz",";","br","(","pq",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pm",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fe",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fe",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pB",qualifier:["float"],is_optional:true},{type:"node_out",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pD",qualifier:["float"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pw",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","px",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","py",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pI","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pL","=","pJ","+","pK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pM"],statements:[{type:"textline",tokens:["pM","=","(","abs","(","pL","[","0","]",")","+","abs","(","pL","[","1","]",")","+","abs","(","pL","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","-","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","+","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","length","(","pT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pT"],statements:[{type:"textline",tokens:["pT","=","normalize","(","pT",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","dot","(","pV",",","pW",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","cross","(","pZ",",","p_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","length","(","qa",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","normalize","(","qc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qc",")",";"]}]}]},{type:"textline",tokens:["qd",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qi","=","reflect","(","-","qg",",","qh",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ql",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qm",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["eY","=","length","(","fd",")",";","if","(","eY","<","qm",")","{","eT","=","ey","(","qj",")",";","eY","=","clamp","(","eh","*","(","qm","-","eY",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","qk","*","eY",";"]},{type:"textline",tokens:["fl","=","normalize","(","eM","*","ff",")",";"]},{type:"textline",tokens:["eX","=","UNITY_VALUE_NODES","/","ql",";"]},{type:"textline",tokens:["eU","=","fl",".","xy","*","eY","/","(","ql","*","fl",".","z",")",";","eY","=","UNITY_VALUE_NODES",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qo","=","1.0",";","qo","<=","ql",";","qo","++",")","{","if","(","eZ","<","eY",")","{","eY","-=","eX",";","eT","-=","eU",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";","}","}"]},{type:"textline",tokens:["eU","=","eT","+","eU",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eU",")",".","a","-","(","eY","+","eX",")",";","eY","=","eZ","-","eY",";","eX","=","eY","/","(","eY","-","eX",")",";"]},{type:"textline",tokens:["eT","=","eX","*","eU","+","(","UNITY_VALUE_NODES","-","eX",")","*","eT",";","qn","=","ew","(","eT",")",";","}","else","qn","=","qj",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","clamp","(","qp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["float"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qt","=","el","(","qr",",","qs",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_out",name:"qz",qualifier:["float"],is_optional:true},{type:"node_out",name:"qA",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qz"],statements:[{type:"textline",tokens:["qz","=","qu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qA"],statements:[{type:"textline",tokens:["qA","=","vec4","(","qv",",","qw",",","qx",",","qy",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qB","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qF","=","smoothstep","(","qD",",","qE",",","qC",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","qG",";","eS","=","qH",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qJ","=","(","qI",".","r","+","qI",".","g","+","qI",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qK",qualifier:["float"],is_optional:false},{type:"node_out",name:"qL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qL","[","0","]","=","qK",";","qL","[","1","]","=","qK",";","qL","[","2","]","=","qK",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qM","(","in","vec3","eM",",","in","mat4","eN",",","out","vec3","eO",",","out","vec3","eP",",","out","vec3","eQ",",","out","vec4","eR",",","out","float","eS",")","{","vec2","eT",",","eU",";","float","eV",",","eW",",","eX",",","eY",",","eZ",",","e_",",","fa",",","fb",",","fc",";","vec4","fd",",","fe",";","mat3","ff",";","vec3","fg",",","fh",",","fi",",","fj",",","fk",",","fl",";","eO","=","vec3","(","ZERO_VALUE_NODES",")",";","eP","=","vec3","(","ZERO_VALUE_NODES",")",";","eQ","=","vec3","(","ZERO_VALUE_NODES",")",";","eR","=","vec4","(","ZERO_VALUE_NODES",")",";","eS","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","normalize","(","bE",")",";","fh","=","fg",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fh","=","fh",";","else","fh","=","-","fh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","fh",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fj","=","cross","(","fh",",","bF",".","xyz",")","*","bF",".","w",";","ff","=","mat3","(","bF",".","xyz",",","fj",",","fh",")",";","ff","=","ff",";"]}]}}]},{type:"textline",tokens:["fh","=","bC",";","fd","=","bD",";","eV","=","u_emit",";","eW","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qN","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qT","(","vec3","qO",",","mat4","qP",")","{","vec3","qQ",",","qR",",","qS",";","qQ","=","vec3","(","qP","[","0","]","[","0","]",",","qP","[","1","]","[","0","]",",","qP","[","2","]","[","0","]",")",";","qR","=","vec3","(","qP","[","0","]","[","1","]",",","qP","[","1","]","[","1","]",",","qP","[","2","]","[","1","]",")",";","qS","=","vec3","(","qP","[","0","]","[","2","]",",","qP","[","1","]","[","2","]",",","qP","[","2","]","[","2","]",")",";","qR","=","cross","(","qS",",","qQ",")",";","qQ","=","normalize","(","qQ",")",";","qR","=","normalize","(","qR",")",";","qS","=","normalize","(","qS",")",";","return","mat4","(","vec4","(","qQ",",","0.0",")",",","vec4","(","qR",",","0.0",")",",","vec4","(","qS",",","0.0",")",",","vec4","(","qO",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","qZ","(","vec3","qU",",","vec3","qV",")","{","vec3","qW",",","qX",",","qY",";","qW","=","qU","-","qV",";","qW",".","y","=","0.0",";","qX","=","cross","(","qN",",","qW",")",";","qY","=","cross","(","qW",",","qX",")",";","qX","=","normalize","(","qX",")",";","qY","=","normalize","(","qY",")",";","qW","=","normalize","(","qW",")",";","return","mat4","(","vec4","(","qX",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qW",",","0.0",")",",","vec4","(","qV",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rg","(","in","vec3","q_",",","float","ra",",","float","rb",",","float","rc",",","vec3","rd",")","{","float","re",",","rf",";","re","=","fract","(","length","(","rd",")","/","0.17",")",";","rf","=","rc","+","re","/","10.0",";","re","=","re",";","if","(","rc","!=","0.0",")","re","/=","rc",";","q_","*=","1.0","+","0.5","*","sin","(","ra",")",";","re","=","length","(","q_",")","*","rb","*","sin","(","2.0","*","3.14","*","ra","*","rf","+","re",")",";","return","C","(","re",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ro","(","in","vec3","rh",",","in","vec3","ri",",","in","mat4","rj",")","{","vec3","rk",";","float","rl",",","rm",";","mat4","rn",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qT","(","ri",",","rj",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rl","=","fract","(","(","ri",".","x","*","1.43","+","ri",".","y","*","0.123","+","ri",".","z","*","6.1",")",")",";","rl","=","2.0","*","M_PI","*","rl",";","rk","=","normalize","(","vec3","(","rj","[","0","]","[","2","]",",","0.0",",","rj","[","2","]","[","2","]",")",")",";","rm","=","acos","(","rk","[","2","]",")",";","if","(","rk","[","0","]","<","0.0",")","rm","=","2.0","*","M_PI","-","rm",";","rm","=","rm","-","rl",";","if","(","rm","<","0.0",")","rm","=","2.0","*","M_PI","+","rm",";","rl","=","rl",";","if","(","rm","<=","MAX_BILLBOARD_ANGLE",")","rl","+=","rm",";","else","if","(","rm","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rm","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rl","+=","rm","-","M_PI",";","else","if","(","rm","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rl","+=","rm","-","2.0","*","M_PI",";","rn","=","A","(","rl",")",";","rn","[","3","]","=","vec4","(","ri",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qZ","(","rh",",","ri",")",";"]}]}}]},{type:"textline",tokens:["return","rn",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ru","(","in","vec3","rp",",","in","vec3","rq",",","in","mat4","rr",",","mat4","rs",")","{","mat4","rt",";","rt","=","ro","(","rp",",","rq",",","rr",")",";","rs","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rt","=","rt","*","rs",";","return","rt",";","}"]}]}}]},{type:"textline",tokens:["c","rB","(","in","vec3","rv",",","in","vec3","rw",",","in","vec3","rx",",","in","vec3","ry",",","in","vec3","rz",",","in","mat4","rA",")","{","rv","=","(","rA","*","vec4","(","rv",",","1.0",")",")",".","xyz",";","rw","=","(","rA","*","vec4","(","rw",",","1.0",")",")",".","xyz",";","rx","=","(","rA","*","vec4","(","rx",",","0.0",")",")",".","xyz",";","ry","=","(","rA","*","vec4","(","ry",",","0.0",")",")",".","xyz",";","rz","=","(","rA","*","vec4","(","rz",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rv",",","rw",",","rx",",","ry",",","rz",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rE","(","vec2","rC",",","vec3","rD",")","{","return","(","rC","+","0.5",")","*","rD",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rL","(","in","vec4","rF",",","in","vec4","rG",",","in","float","rH",")","{","float","rI",",","rJ",",","rK",";","rI","=","rF","[","0","]","*","rG","[","0","]","+","rF","[","1","]","*","rG","[","1","]","+","rF","[","2","]","*","rG","[","2","]","+","rF","[","3","]","*","rG","[","3","]",";","if","(","rI","<","0.0",")","{","rG","*=","-","1.0",";","rI","=","-","rI",";","}","if","(","abs","(","rI",")",">=","1.0",")","return","rF",";","rJ","=","acos","(","rI",")",";","rI","=","sqrt","(","1.0","-","rI","*","rI",")",";","if","(","abs","(","rI",")","<","0.001",")","return","vec4","(","rF","*","0.5","+","rG","*","0.5",")",";","rK","=","sin","(","(","1.0","-","rH",")","*","rJ",")","/","rI",";","rI","=","sin","(","rH","*","rJ",")","/","rI",";","return","rF","*","rK","+","rG","*","rI",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","rM",",","in","vec4","rN",",","in","vec4","rO",",","in","vec4","rP",",","in","vec4","rQ",",","in","float","rR",")","{","vec4","rS",",","rT",";","vec3","rU",",","rV",",","rW",";","rU","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rM",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rS","=","rL","(","rN",",","rO",",","rR",")",";","rT","=","mix","(","rP",",","rQ",",","rR",")",";","rV","=","i","(","rS",",","rU",")",";","rV","=","rV","*","rT",".","w","+","rT",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rW","=","i","(","rN",",","rU",")",";","rU","=","i","(","rO",",","rU",")",";","rW","=","rW","*","rP",".","w","+","rP",".","xyz",";","rU","=","rU","*","rQ",".","w","+","rQ",".","xyz",";","rV","=","mix","(","rW",",","rU",",","rR",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rV",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","rY",",","in","vec4","rZ",",","in","vec4","r_",",","in","float","sa",")","{","vec4","sb",";","vec3","sc",",","sd",",","se",";","sc","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rY",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sb","=","rL","(","rZ",",","r_",",","sa",")",";","sd","=","i","(","sb",",","sc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["se","=","i","(","rZ",",","sc",")",";","sc","=","i","(","r_",",","sc",")",";","sd","=","mix","(","se",",","sc",",","sa",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","sg",",","in","vec4","sh",",","in","vec4","si",")","{","vec3","sj",";","sj","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sg",",","1.0",")",")",";","sj","=","i","(","sh",",","sj",")",";","sj","=","sj","*","si",".","w","+","si",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","sk",",","in","vec4","sl",")","{","vec3","sm",";","sm","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sk",",","0.0",")",")",";","sm","=","i","(","sl",",","sm",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sB","(","inout","vec3","sn",",","inout","vec3","so",",","inout","vec3","sp",",","inout","vec3","sq",")","{","int","sr",",","ss",";","vec4","st",";","vec3","su",",","sv",",","sw",",","sx",";","float","sy",",","sz",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sy","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","su","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sv","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","st","=","a_influence",";","for","(","int","sA","=","0",";","sA","<","4",";","sA","++",")","{","sr","=","int","(","st","[","sA","]",")",";","sz","=","fract","(","st","[","sA","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","u_transb","[","sr","]",",","u_transa","[","sr","]",",","sy",")",";","sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_transb","[","sr","]",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sn","=","su",";","sq","=","sx",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sv",";","sp","=","sw",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","ss","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","ss",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","u_transb","[","ss","]",",","u_transa","[","ss","]",",","sy",")",";","so","=","sf","(","so",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_transb","[","ss","]",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sf","(","so",",","u_quatsb","[","ss","]",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sM","(","inout","vec3","sC",",","in","vec3","sD",",","in","float","sE",",","in","float","sF",",","in","float","sG",",","in","vec3","sH",",","in","float","sI",")","{","vec3","sJ",";","float","sK",",","sL",";","sK","=","length","(","sD",")",";","sL","=","sF","*","(","1.0","+","0.1","*","fract","(","sK",")",")",";","sK","=","sE","*","sI","*","(","1.0","+","sin","(","2.0","*","3.14","*","sG","*","sL","+","sK",")",")",";","sL","=","(","sC",".","y","-","sD",".","y",")","*","abs","(","sK",")",";","sL","+=","1.0",";","sL","*=","sL",";","sL","=","sL","*","sL","-","sL",";","sJ","=","sC",";","sJ",".","xz","+=","sH",".","xz","*","sL","*","sign","(","sK",")",";","sJ","=","sJ","-","sD",";","if","(","all","(","equal","(","sJ",",","vec3","(","0.0",")",")",")",")","sC","=","sD",";","else","{","sK","=","length","(","sC","-","sD",")",";","sC","=","sD","+","normalize","(","sJ",")","*","sK",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sO","(","vec4","sN",")","{","return","sN","*","sN","*","(","3.0","-","2.0","*","sN",")",";","}","vec4","sQ","(","vec4","sP",")","{","return","abs","(","fract","(","sP","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sS","(","vec4","sR",")","{","return","sO","(","sQ","(","sR",")",")",";","}","void","ti","(","inout","vec3","sT",",","in","float","sU",",","in","vec3","sV",",","in","vec3","sW",",","in","vec3","sX",",","in","float","sY",",","in","float","sZ",",","in","float","s_",",","in","vec3","ta",")","{","vec3","tb",";","vec4","tc",";","vec2","td",",","te",";","float","tf",",","tg",",","th",";","tf","=","dot","(","sX",",","vec3","(","1.0",")",")",";","tg","=","tf","+","ta",".","g",";","th","=","dot","(","sT",",","vec3","(","ta",".","g",")",")",";","td","=","(","sU","+","vec2","(","th",",","tg",")",")",";","tc","=","(","(","fract","(","(","td",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sW",")","*","sY",";","tc","=","sS","(","tc",")",";","te","=","tc",".","xz","+","tc",".","yw",";","te",".","y","=","0.5","-","te",".","y",";","tb","=","te",".","xyx","*","ta",".","rbr","*","vec3","(","sZ","*","sV",".","x",",","s_",",","sZ","*","sV",".","z",")",";","sT","+=","tb",";","}"]}]}}]},{type:"textline",tokens:["void","tp","(","inout","vec3","tj",",","inout","vec3","tk",",","in","vec3","tl",")","{","vec3","tm",",","tn",",","to",";","tm","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tk",";","to","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tj",";","to","=","tk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ti","(","tn",",","u_time",",","tl",",","tm",",","to",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tj","+=","tn","-","tk",";","tk","=","tn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tj","=","tn",";","tk","=","to",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eG",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eH",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ez",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tq",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tq","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"tr",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["tr","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"ts",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ts","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tt",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tt","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tu","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tz","(","vec3","tv",",","float","tw",",","vec2","tx",")","{","vec2","ty",";","ty","=","vec2","(","(","tv",".","x","-","tx",".","x",")","/","tw",",","-","(","tv",".","z","-","tx",".","y",")","/","tw",")",";","return","fract","(","ty",")",";","}","vec2","tD","(","vec2","tA",",","float","tB",",","vec2","tC",")","{","return","vec2","(","tA",".","x","*","tB",",","-","tA",".","y","*","tB",")","+","tC",";","}","c","tE","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","t_","(","vec3","tF",",","vec3","tG",",","vec3","tH",",","vec3","tI",",","vec3","tJ",",","PRECISION","sampler2D","tK",",","sampler2D","tL",",","vec3","tM",",","float","tN",",","vec3","tO",",","vec4","tP",",","mat4","tQ",")","{","mat4","tR",";","vec4","tS",";","vec2","tT",",","tU",",","tV",";","float","tW",",","tX",";","vec3","tY",";","tY","=","i","(","tP",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","tW","=","-","tY",".","x",";","tX","=","-","tY",".","z",";","tT","=","vec2","(","tO",".","x","+","tN","*","(","-","1.0","-","tW",")","/","2.0",",","tO",".","z","+","tN","*","(","1.0","-","tX",")","/","2.0",")",";","tU","=","tz","(","tJ",",","tN",",","tT",")",";","tX","=","tN","/","2.0",";","tV","=","abs","(","tD","(","tU","-","vec2","(","0.5",")",",","tN",",","vec2","(","0.0",")",")",")",";","tX","=","tX","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","tV",")",">","tX",")","return","tE","(",")",";","tX","=","tN","/","tM",".","z",";","tV","=","(","tU","-","vec2","(","0.5",")",")","*","tX","+","vec2","(","0.5",")",";","tY","=","tY","*","(","tN","/","tM",".","z","-","1.0",")","/","2.0",";","tV",".","x","+=","tY",".","x",";","tV",".","y","-=","tY",".","z",";","tS","=","texture2D","(","tL",",","tV",")",";","tX","=","tS",".","r",";","if","(","tX","<","u_scale_threshold",")","return","tE","(",")",";","tW","=","tM",".","y","-","tM",".","x",";","tW","=","tM",".","y","-","texture2D","(","tK",",","tV",")",".","r","*","tW",";","tV","=","tF",".","xz","-","tJ",".","xz",";","tJ",".","xz","=","tD","(","tU",",","tN",",","tT",")",";","tJ",".","y","=","tW",";","tF",".","xz","=","tJ",".","xz","+","tV",";","tF",".","y","*=","tX",";","tF",".","y","+=","tW",";","tY","=","tS",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tF","-=","tJ",";","tR","=","ro","(","tO",",","tJ",",","tQ",")",";","c","tZ","=","rB","(","tF",",","tJ",",","tG",",","tH",",","tI",",","tR",")",";","tZ",".","b","=","tJ",";","tZ",".","f","=","tY",";","return","E","(","tZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","tF",",","tJ",",","tG",",","tH",",","tI",",","tY",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ug","(","mat4","ua",",","vec4","ub",",","mat4","uc",")","{","vec4","ud",";","float","ue",";","vec2","uf",";","uf","=","(","ua","*","uc","[","3","]",")",".","xy",";","ue","=","SHADOW_TEX_RES","/","2.0",";","uf","=","floor","(","uf","*","ue","+","0.5",")","/","ue","-","uf",";","ud","=","ua","*","ub",";","ud",".","xy","+=","uf",";","ud",".","xyz","=","0.5","*","(","ud",".","xyz","+","ud",".","w",")",";","return","ud",";","}","void","ul","(","vec3","uh",",","vec3","ui",")","{","vec4","uj",";","mat4","uk",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","u_v_light_tsr","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","mat3","(","u_v_light_ts","[","0","]",",","u_v_light_r","[","0","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["uj","=","uk","*","vec4","(","uh","+","u_normal_offset","*","ui",",","1.0",")",";","bI","=","ug","(","u_p_light_matrix0",",","uj",",","uk",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","u_v_light_tsr","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","mat3","(","u_v_light_ts","[","1","]",",","u_v_light_r","[","1","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["uj","=","uk","*","vec4","(","uh","+","u_normal_offset","*","ui",",","1.0",")",";","bJ","=","ug","(","u_p_light_matrix1",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","u_v_light_tsr","[","2","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","mat3","(","u_v_light_ts","[","2","]",",","u_v_light_r","[","2","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["uj","=","uk","*","vec4","(","uh","+","u_normal_offset","*","ui",",","1.0",")",";","bK","=","ug","(","u_p_light_matrix2",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","u_v_light_tsr","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uk","=","O","(","mat3","(","u_v_light_ts","[","3","]",",","u_v_light_r","[","3","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["uj","=","uk","*","vec4","(","uh","+","u_normal_offset","*","ui",",","1.0",")",";","bL","=","ug","(","u_p_light_matrix3",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","ug","(","u_p_light_matrix1",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","ug","(","u_p_light_matrix2",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","ug","(","u_p_light_matrix3",",","uj",",","uk",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["void","uv","(","inout","vec3","up",",","in","float","uq",",","in","float","ur",",","in","vec4","us",")","{","float","ut",",","uu",";","ut","=","clamp","(","(","uq","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","*=","ut",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","sqrt","(","ut",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","ur",">","u_fog_params",".","w",")","ut","=","0.0",";","else","if","(","ur",">","0.0",")","{","uu","=","(","u_fog_params",".","w","-","ur",")","/","u_fog_params",".","w",";","ut","*=","uu","*","uu",";","}","}","us",".","a","=","1.0","-","(","1.0","-","ut",")","*","(","1.0","-","u_fog_params",".","x",")",";","up","=","mix","(","up",",","us",".","rgb",",","us",".","a",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uB","(","in","mat4","uw",",","in","vec3","ux",")","{","vec3","uy",",","uz",",","uA",";","uy","=","mix","(","uw","[","0","]",".","rgb",",","uw","[","1","]",".","rgb",",","max","(","sign","(","ux",".","x",")",",","0.0",")",")",";","uz","=","mix","(","uw","[","2","]",".","rgb",",","uw","[","3","]",".","rgb",",","max","(","sign","(","ux",".","z",")",",","0.0",")",")",";","uA","=","vec3","(","uw","[","0","]",".","a",",","uw","[","1","]",".","a",",","uw","[","2","]",".","a",")",";","uz","=","mix","(","uy",",","uz",",","abs","(","ux",".","z",")",")",";","uz","=","mix","(","uz",",","uA",",","abs","(","ux",".","y",")",")",";","br","(","uz",")",";","return","uz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uD","(","inout","float","uC",")","{","uC","-=","0.5",";","uC","=","4.0","*","(","uC","*","uC","*","uC",")","+","0.5",";","}"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uO","(","inout","vec3","uE",",","in","float","uF",",","in","vec3","uG",",","in","float","uH",",","in","vec4","uI",",","in","float","uJ",")","{","vec3","uK",",","uL",";","float","uM",",","uN",";","uM","=","max","(","uG",".","y",",","0.0",")",";","uN","=","max","(","uF","-","max","(","uH","/","uM",",","0.0",")",",","0.0",")",";","uN","=","uI",".","w","*","uN",";","uK","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uL","=","uI",".","rgb",";","uN","=","min","(","uN",",","1.0",")",";","uD","(","uN",")",";","uN","*=","clamp","(","2.0","-","uJ",",","0.0",",","1.0",")",";","uK","=","mix","(","uL",",","uK",",","min","(","uM",",","1.0",")",")",";","uH","=","clamp","(","-","uH","*","0.03",",","0.0",",","0.8",")",";","uK","*=","1.0","-","uH",";","uE","=","mix","(","uE",",","uK",",","uN",")",";","}"]}]}}]},{type:"textline",tokens:["void","uU","(","inout","vec3","uP",",","in","float","uQ",",","in","float","uR",")","{","vec3","uS",";","float","uT",";","uT","=","u_underwater_fog_color_density",".","w","*","uQ",";","uT","=","clamp","(","uT",",","0.0",",","1.0",")",";","uD","(","uT",")",";","uR","=","clamp","(","-","uR","*","0.03",",","0.0",",","0.8",")",";","uS","=","mix","(","u_underwater_fog_color_density",".","rgb",",","vec3","(","0.0",")",",","uR",")",";","uP","=","mix","(","uP",",","uS",",","uT",")",";","}"]}]}}]},{type:"textline",tokens:["void","va","(","inout","vec3","uV",",","float","uW",",","vec3","uX",",","float","uY",")","{","vec4","uZ",";","vec3","u_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","uB","(","u_cube_fog",",","uX",")",";","uZ","=","vec4","(","u_",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","u_fog_color_density",";"]}]}}]},{type:"textline",tokens:["uv","(","uV",",","uW",",","bC",".","y",",","uZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","uV",",","uW",",","uX",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uY",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["}"]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vd","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"vB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vG",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vH",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vI",qualifier:["vec4"],is_optional:true},{type:"node_out",name:"vJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"vK",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["vB","=","ve",";","vC","=","vf",";","vD","=","vg",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vE"],statements:[{type:"textline",tokens:["vE","=","vh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vF"],statements:[{type:"textline",tokens:["vF","=","vj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vH"],statements:[{type:"textline",tokens:["vH","=","vl",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vG"],statements:[{type:"textline",tokens:["vG","=","vm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vI"],statements:[{type:"textline",tokens:["vI","=","vn",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vJ"],statements:[{type:"textline",tokens:["vJ","=","vo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vK"],statements:[{type:"textline",tokens:["vK","=","vp",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"vL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vO",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"vP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vO","=","vec4","(","vL","+","vN","*","vM",",","ZERO_VALUE_NODES",")",";","vP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"vQ",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"vR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vS",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"vT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["vS","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vU","=","vd",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vU","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["vT","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["vT","*=","vQ","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vz","=","u_light_positions","[","LAMP_IND","]",";","vR","=","vz","-","vi",";"]},{type:"textline",tokens:["vs","=","length","(","vR",")",";","vT","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vs","*","vs",")",";","vR","=","normalize","(","vR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vz","=","u_light_directions","[","LAMP_IND","]",";","vs","=","dot","(","vR",",","vz",")",";","vs","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","vs","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","vT","*=","vs",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["vR","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"vV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"vX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vY",qualifier:["float"],is_optional:false},{type:"node_in",name:"vZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"v_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["v_","=","ZERO_VALUE_NODES",";","if","(","vW",".","r","!=","ZERO_VALUE_NODES",")","{","vs","=","(","UNITY_VALUE_NODES","-","vY",")","*","dot","(","vX",",","vV",")","+","vY",";","if","(","vZ","[","0","]","==","ZERO_VALUE_NODES",")","{","v_","=","UNITY_VALUE_NODES",";","}","else","{","vs","=","UNITY_VALUE_NODES","+","abs","(","vs",")",";","vs","=","vZ","[","1","]","+","(","UNITY_VALUE_NODES","-","vZ","[","1","]",")","*","pow","(","vs",",","vZ","[","0","]",")",";","v_","=","clamp","(","vs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","v_","=","max","(","v_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wb",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wd",qualifier:["float"],is_optional:false},{type:"node_out",name:"we",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["we","=","ZERO_VALUE_NODES",";","if","(","wb",".","r","!=","ZERO_VALUE_NODES",")","{","vs","=","(","UNITY_VALUE_NODES","-","wd",")","*","dot","(","wc",",","wa",")","+","wd",";","we","=","max","(","vs",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wg",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wi",qualifier:["float"],is_optional:false},{type:"node_in",name:"wj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wk","=","ZERO_VALUE_NODES",";","if","(","wg",".","r","!=","ZERO_VALUE_NODES",")","{","vs","=","(","UNITY_VALUE_NODES","-","wi",")","*","dot","(","wh",",","wf",")","+","wi",";","if","(","wj","[","0","]",">","ZERO_VALUE_NODES",")","{","vt","=","max","(","dot","(","wh",",","vk",")",",","ZERO_VALUE_NODES",")",";","vu","=","wj","[","0","]","*","wj","[","0","]",";","vv","=","UNITY_VALUE_NODES","-","vd","*","(","vu","/","(","vu","+","0.33",")",")",";","vz","=","wf","-","vs","*","wh",";","vA","=","vk","-","vt","*","wh",";"]},{type:"textline",tokens:["if","(","length","(","vz",")","==","ZERO_VALUE_NODES","||","length","(","vA",")","==","ZERO_VALUE_NODES","||","abs","(","vs",")",">","UNITY_VALUE_NODES","||","abs","(","vt",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wk","=","vs","*","vv",";","else","{","vw","=","acos","(","vs",")",";","vt","=","acos","(","vt",")",";","vz","=","normalize","(","vz",")",";","vA","=","normalize","(","vA",")",";","vx","=","max","(","vw",",","vt",")",";","vy","=","min","(","vw",",","vt",")",";","vy","*=","0.95",";","vt","=","max","(","dot","(","vz",",","vA",")",",","ZERO_VALUE_NODES",")",";","vu","=","0.45","*","(","vu","/","(","vu","+","0.09",")",")",";","wk","=","vs","*","(","vv","+","(","vu","*","vt","*","sin","(","vx",")","*","tan","(","vy",")",")",")",";","}","}","else","wk","=","vs",";","wk","=","max","(","wk",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wm",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wo",qualifier:["float"],is_optional:false},{type:"node_in",name:"wp",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wq","=","ZERO_VALUE_NODES",";","if","(","wm",".","r","!=","ZERO_VALUE_NODES",")","{","vs","=","(","UNITY_VALUE_NODES","-","wo",")","*","dot","(","wn",",","wl",")","+","wo",";","vy","=","max","(","dot","(","wn",",","vk",")",",","ZERO_VALUE_NODES",")",";","if","(","wp","[","0","]","<=","UNITY_VALUE_NODES",")","wq","=","vs","*","pow","(","max","(","vy","*","vs",",","0.1",")",",","wp","[","0","]","-","UNITY_VALUE_NODES",")",";","else","wq","=","vs","*","pow","(","1.0001","-","vy",",","wp","[","0","]","-","UNITY_VALUE_NODES",")",";","wq","=","max","(","wq",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"wr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ws",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wu",qualifier:["float"],is_optional:false},{type:"node_in",name:"wv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ww",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ww","=","ZERO_VALUE_NODES",";","if","(","ws",".","r","!=","ZERO_VALUE_NODES",")","{","vy","=","(","UNITY_VALUE_NODES","-","wu",")","*","dot","(","wt",",","wr",")","+","wu",";","vy","=","acos","(","vy",")",";","if","(","vy","<","wv","[","0","]",")","ww","=","UNITY_VALUE_NODES",";","else","if","(","vy",">","(","wv","[","0","]","+","wv","[","1","]",")","||","wv","[","1","]","==","ZERO_VALUE_NODES",")","ww","=","ZERO_VALUE_NODES",";","else","ww","=","UNITY_VALUE_NODES","-","(","(","vy","-","wv","[","0","]",")","/","wv","[","1","]",")",";","ww","=","max","(","ww",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"wx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wy",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wA",qualifier:["float"],is_optional:false},{type:"node_in",name:"wB",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wC","=","ZERO_VALUE_NODES",";","if","(","wy",".","g","!=","ZERO_VALUE_NODES",")","{","vA","=","normalize","(","wx","+","vk",")",";","wC","=","(","UNITY_VALUE_NODES","-","wA",")","*","max","(","dot","(","wz",",","vA",")",",","ZERO_VALUE_NODES",")","+","wA",";","wC","=","pow","(","wC",",","wB","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"wD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wE",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wH","=","ZERO_VALUE_NODES",";","if","(","wE",".","g","!=","ZERO_VALUE_NODES",")","{","vA","=","normalize","(","wD","+","vk",")",";","vy","=","max","(","dot","(","wF",",","vA",")",",","0.001",")",";"]},{type:"textline",tokens:["vs","=","max","(","dot","(","wF",",","vk",")",",","0.01",")",";","vx","=","max","(","dot","(","wF",",","wD",")",",","0.01",")",";","vy","=","tan","(","acos","(","vy",")",")",";","vt","=","max","(","wG","[","0","]",",","0.001",")",";","wH","=","vx","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","vt","*","vt",")",")","*","(","exp","(","-","(","vy","*","vy",")","/","(","vt","*","vt",")",")","/","(","sqrt","(","vs","*","vx",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"wI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wJ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wL",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wM","=","ZERO_VALUE_NODES",";","if","(","wJ",".","g","!=","ZERO_VALUE_NODES",")","{","vA","=","normalize","(","wI","+","vk",")",";","vx","=","acos","(","dot","(","vA",",","wK",")",")",";","if","(","vx","<","wL","[","0","]",")","wM","=","UNITY_VALUE_NODES",";","else","if","(","vx",">=","wL","[","0","]","+","wL","[","1","]","||","wL","[","1","]","==","ZERO_VALUE_NODES",")","wM","=","ZERO_VALUE_NODES",";","else","wM","=","UNITY_VALUE_NODES","-","(","vx","-","wL","[","0","]",")","/","wL","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"wN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wO",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"wR",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wS","=","ZERO_VALUE_NODES",";","if","(","wO",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","wR","[","0","]","<","1.0","||","wR","[","1","]","==","ZERO_VALUE_NODES",")","wS","=","ZERO_VALUE_NODES",";","else","{","if","(","wR","[","1","]","<","100.0",")","wR","[","1","]","=","sqrt","(","1.0","/","wR","[","1","]",")",";","else","wR","[","1","]","=","10.0","/","wR","[","1","]",";","vA","=","normalize","(","vk","+","wN",")",";","vx","=","(","UNITY_VALUE_NODES","-","wQ",")","*","max","(","dot","(","wP",",","vA",")",",","ZERO_VALUE_NODES",")","+","wQ",";","if","(","vx","<","ZERO_VALUE_NODES",")","wS","=","ZERO_VALUE_NODES",";","else","{","vs","=","max","(","dot","(","wP",",","vk",")",",","0.01",")",";","vt","=","dot","(","wP",",","wN",")",";","if","(","vt","<=","0.01",")","wS","=","ZERO_VALUE_NODES",";","else","{","vy","=","max","(","dot","(","vk",",","vA",")",",","0.01",")",";","vu","=","UNITY_VALUE_NODES",";","vs","=","(","2.0","*","vx","*","vs",")","/","vy",";","vt","=","(","2.0","*","vx","*","vt",")","/","vy",";","vt","=","min","(","min","(","vu",",","vs",")",",","vt",")",";","vs","=","sqrt","(","pow","(","wR","[","0","]",",","2.0",")","+","pow","(","vy",",","2.0",")","-","UNITY_VALUE_NODES",")",";","vy","=","pow","(","vs","-","vy",",","2.0",")","/","pow","(","vs","+","vy",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","vy","*","(","vs","+","vy",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","vy","*","(","vs","-","vy",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","vx","=","acos","(","vx",")",";","wS","=","max","(","vy","*","vt","*","exp","(","-","pow","(","vx",",","2.0",")","/","(","2.0","*","pow","(","wR","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"wT",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wV",qualifier:["float"],is_optional:false},{type:"node_in",name:"wW",qualifier:["float"],is_optional:false},{type:"node_in",name:"wX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"w_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xc",qualifier:["float"],is_optional:false},{type:"node_out",name:"xd",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xe",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xe","=","wU","+","xb","*","xa","*","wW",";","xd","=","wT","+","vec4","(","xb","*","w_","*","wV",",","wW",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xf",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vq","=","xf",".","rgb",";","vr","=","xg",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xh","(","vec3","ve",",","vec3","vf",",","vec3","vg",",","vec3","vh",",","vec3","vi",",","vec3","vj",",","vec3","vk",",","vec2","vl",",","vec2","vm",",","vec4","vn",",","float","vo",",","vec4","vp",",","out","vec3","vq",",","out","vec3","vr",")","{","float","vs",",","vt",",","vu",",","vv",",","vw",",","vx",",","vy",";","vec3","vz",",","vA",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","xk","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xq","(","inout","float","xl",",","float","xm",",","vec2","xn",",","vec2","xo",")","{","float","xp",";","xp","=","xo",".","x","-","xn",".","x",";","xp","=","(","xm","-","xn",".","x",")","/","xp",";","xl","=","mix","(","xl",",","xo",".","y",",","clamp","(","xp",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xw","(","inout","vec3","xr",",","float","xs",",","vec4","xt",",","vec4","xu",")","{","float","xv",";","xv","=","xu",".","x","-","xt",".","x",";","xv","=","(","xs","-","xt",".","x",")","/","xv",";","xr","=","mix","(","xr",",","xu",".","yzw",",","clamp","(","xv",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xC","(","float","xx",",","float","xy",",","vec2","xz","[","SIZE_RAMP_LENGTH","]",")","{","float","xA",",","xB",";","xA","=","xx","/","xy",";","xB","=","xz","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","(","xB",",","xA",",","xz","[","0","]",",","xz","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","(","xB",",","xA",",","xz","[","1","]",",","xz","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","(","xB",",","xA",",","xz","[","2","]",",","xz","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xB",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xI","(","float","xD",",","float","xE",",","vec4","xF","[","COLOR_RAMP_LENGTH","]",")","{","vec3","xG",";","float","xH",";","xH","=","xD","/","xE",";","xG","=","xF","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xw","(","xG",",","xH",",","xF","[","0","]",",","xF","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xw","(","xG",",","xH",",","xF","[","1","]",",","xF","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xw","(","xG",",","xH",",","xF","[","2","]",",","xF","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xG",";","}"]}]}}]},{type:"textline",tokens:["float","xQ","(","float","xJ",",","float","xK",",","float","xL",",","float","xM",")","{","float","xN",",","xO",",","xP",";","xN","=","max","(","0.01",",","min","(","xK",",","xL",")",")",";","xO","=","max","(","0.01",",","min","(","xK",",","xM",")",")",";","xP","=","xK","-","xO",";","xO","=","clamp","(","xJ","/","xN",",","0.0",",","1.0",")","-","step","(","xP",",","xJ",")","*","(","xJ","-","xP",")","/","xO",";","return","xO",";","}","xk","xX","(",")","{","mat4","xR",";","vec3","xS",",","xT",";","float","xU",",","xV",";","xk","xW",";","if","(","u_p_cyclic","==","1",")","{","xU","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","xU","<","0.0",")","xU","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","xU","=","u_p_time","-","a_p_delay",";","}","if","(","xU","<","0.0","||","xU",">=","a_p_lifetime",")","{","xW",".","a","=","0.0001",";","xW",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","xU","<","0.0","||","xU",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["xS","=","a_position",";","xT","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xR","=","O","(","u_model_tsr",")",";","xS","=","(","xR","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xT","=","(","xR","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["xS","+=","u_p_nfactor","*","xU","*","xT",";","xS","+=","a_p_vels",".","xyz","*","xU",";","xS",".","y","-=","u_p_gravity","*","xU","*","xU","/","2.0",";","xV","=","max","(","u_p_mass",",","EPSILON",")",";","xS","+=","(","u_p_wind_fac","*","u_wind","/","xV",")","*","xU","*","xU","/","2.0",";","xW",".","b","=","xS",";","xW",".","e","=","a_p_vels",".","w","*","xU",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xW",".","a","=","xC","(","xU",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xW",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xW",".","d","=","xI","(","xU",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xW",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["xW",".","c","=","xQ","(","xU",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","xW",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","xZ","=","0.0",";","float","x_","=","1.0",";","vec3","ye","(","vec3","ya",")","{","float","yb",",","yc",";","vec4","yd",";","yd","=","vec4","(","xZ",",","-","x_","/","3.0",",","2.0","/","3.0",",","-","x_",")",";","yd","=","mix","(","vec4","(","ya",".","bg",",","yd",".","wz",")",",","vec4","(","ya",".","gb",",","yd",".","xy",")",",","step","(","ya",".","b",",","ya",".","g",")",")",";","yd","=","mix","(","vec4","(","yd",".","xyw",",","ya",".","r",")",",","vec4","(","ya",".","r",",","yd",".","yzx",")",",","step","(","yd",".","x",",","ya",".","r",")",")",";","yb","=","yd",".","x","-","min","(","yd",".","w",",","yd",".","y",")",";","yc","=","1.0e-10",";","return","vec3","(","abs","(","yd",".","z","+","(","yd",".","w","-","yd",".","y",")","/","(","6.0","*","yb","+","yc",")",")",",","yb","/","(","yd",".","x","+","yc",")",",","yd",".","x",")",";","}","vec3","yi","(","vec3","yf",")","{","vec3","yg",";","vec4","yh",";","yh","=","vec4","(","x_",",","2.0","/","3.0",",","x_","/","3.0",",","3.0",")",";","yg","=","abs","(","fract","(","vec3","(","yf",".","r",",","yf",".","r",",","yf",".","r",")","+","yh",".","xyz",")","*","6.0","-","yh",".","www",")",";","return","yf",".","b","*","mix","(","yh",".","xxx",",","clamp","(","yg","-","yh",".","xxx",",","xZ",",","x_",")",",","yf",".","g",")",";","}","vec3","ym","(","vec3","yj",",","vec3","yk",",","float","yl",")","{","return","mix","(","yj",",","yk",",","yl",")",";","}","vec3","yq","(","vec3","yn",",","vec3","yo",",","float","yp",")","{","return","yp","*","yn","+","yo",";","}","vec3","yu","(","vec3","yr",",","vec3","ys",",","float","yt",")","{","return","ys","-","yt","*","yr",";","}","vec3","yz","(","vec3","yv",",","vec3","yw",",","float","yx",")","{","float","yy",";","yy","=","x_","-","yx",";","return","(","vec3","(","yy",")","+","yx","*","yv",")","*","yw",";","}","vec3","yE","(","vec3","yA",",","vec3","yB",",","float","yC",")","{","vec3","yD",";","yD","=","vec3","(","x_","-","yC",")",";","return","vec3","(","x_",")","-","(","yD","+","yC","*","(","vec3","(","x_",")","-","yA",")",")","*","(","vec3","(","x_",")","-","yB",")",";","}","vec3","yJ","(","vec3","yF",",","vec3","yG",",","float","yH",")","{","vec3","yI",";","yI","=","vec3","(","x_","-","yH",")",";","return","mix","(","yG","*","(","yI","+","2.0","*","yH","*","yF",")",",","vec3","(","x_",")","-","(","yI","+","2.0","*","yH","*","(","vec3","(","x_",")","-","yF",")",")","*","(","vec3","(","x_",")","-","yG",")",",","step","(","0.5",",","yG",")",")",";","}","vec3","yN","(","vec3","yK",",","vec3","yL",",","float","yM",")","{","return","mix","(","yL",",","abs","(","yK","-","yL",")",",","yM",")",";","}","vec3","yR","(","vec3","yO",",","vec3","yP",",","float","yQ",")","{","return","mix","(","yP",",","yP","/","(","yO","+","step","(","yO",",","vec3","(","xZ",")",")",")",",","yQ",")",";","}","vec3","yV","(","vec3","yS",",","vec3","yT",",","float","yU",")","{","return","mix","(","yT",",","min","(","yS",",","yT",")",",","yU",")",";","}","vec3","yZ","(","vec3","yW",",","vec3","yX",",","float","yY",")","{","return","max","(","yY","*","yW",",","yX",")",";","}","vec3","ze","(","vec3","y_",",","vec3","za",",","float","zb",")","{","vec3","zc",",","zd",";","zc","=","ye","(","za",")",";","if","(","zc",".","y","!=","xZ",")","{","zd","=","ye","(","y_",")",";","zd","=","yi","(","vec3","(","zc",".","x",",","zd",".","yz",")",")",";","return","mix","(","y_",",","zd",",","zb",")",";","}","return","y_",";","}","vec3","zk","(","vec3","zf",",","vec3","zg",",","float","zh",")","{","vec3","zi",",","zj",";","zi","=","ye","(","zf",")",";","if","(","zi",".","y","!=","xZ",")","{","zj","=","ye","(","zg",")",";","return","yi","(","vec3","(","zi",".","x",",","mix","(","zi",".","y",",","zj",".","y",",","zh",")",",","zi",".","z",")",")",";","}","return","zf",";","}","vec3","zq","(","vec3","zl",",","vec3","zm",",","float","zn",")","{","vec3","zo",",","zp",";","zo","=","ye","(","zl",")",";","zp","=","ye","(","zm",")",";","return","yi","(","vec3","(","zo",".","xy",",","mix","(","zo",".","z",",","zp",".","z",",","zn",")",")",")",";","}","vec3","zw","(","vec3","zr",",","vec3","zs",",","float","zt",")","{","vec3","zu",",","zv",";","zu","=","ye","(","zs",")",";","if","(","zu",".","y","!=","xZ",")","{","zv","=","ye","(","zr",")",";","zv","=","yi","(","vec3","(","zu",".","xy",",","zv",".","z",")",")",";","return","mix","(","zr",",","zv",",","zt",")",";","}","return","zr",";","}","vec3","zB","(","vec3","zx",",","vec3","zy",",","float","zz",")","{","vec3","zA",";","zA","=","vec3","(","x_",")","-","(","vec3","(","x_",")","-","zy",")","*","(","vec3","(","x_",")","-","zx",")",";","return","mix","(","zx",",","(","(","vec3","(","x_",")","-","zx",")","*","zy","*","zx",")","+","zx","*","zA",",","zz",")",";","}","vec3","zF","(","vec3","zC",",","vec3","zD",",","float","zE",")","{","return","zC","+","zE","*","(","2.0","*","zD","-","x_",")",";","}","float","zL","(","float","zG",",","float","zH",",","float","zI",",","float","zJ",")","{","float","zK",";","zK","=","x_","-","zJ",";","return","(","zK","+","zI","*","zG",")","*","zH",";","}","float","zR","(","float","zM",",","float","zN",",","float","zO",",","float","zP",")","{","float","zQ",";","zQ","=","x_","-","zP",";","return","x_","-","(","zQ","+","zO","*","(","x_","-","zM",")",")","*","(","x_","-","zN",")",";","}","float","zX","(","float","zS",",","float","zT",",","float","zU",",","float","zV",")","{","float","zW",";","zW","=","x_","-","zV",";","return","mix","(","zT","*","(","zW","+","2.0","*","zU","*","zS",")",",","x_","-","(","zW","+","2.0","*","zU","*","(","x_","-","zS",")",")","*","(","x_","-","zT",")",",","step","(","0.5",",","zT",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","At","(","float","As",")","{","return","clamp","(","As",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Aw","(","sampler2D","Au",",","vec2","Av",")","{","return","texture2D","(","Au",",","Av",")",";","}","vec4","AB","(","sampler2D","Ax",",","vec2","Ay",",","vec2","Az",",","vec2","AA",")","{","return","texture2D","(","Ax",",","Ay","+","(","Az","*","AA",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Bh","(","vec2","AC",",","sampler2D","AD",",","vec2","AE",",","float","AF",",","float","AG",",","float","AH",")","{","bool","AI",",","AJ",",","AK",",","AL",",","AM",";","float","AN",",","AO",",","AP",",","AQ",",","AR",",","AS",",","AT",",","AU",",","AV",",","AW",",","AX",",","AY",",","AZ",",","A_",",","Ba",";","vec4","Bb",";","vec2","Bc",",","Bd",",","Be",",","Bf",",","Bg",";","Bc",".","x","=","AC",".","x",";","Bc",".","y","=","AC",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Bb","=","Aw","(","AD",",","Bc",")",";","AN","=","bB","(","Bb",")",";","AO","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","0",",","1",")",",","AE",".","xy",")",")",";","AP","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","1",",","0",")",",","AE",".","xy",")",")",";","AQ","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","0",",","-","1",")",",","AE",".","xy",")",")",";","AR","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","-","1",",","0",")",",","AE",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["AS","=","max","(","AO",",","AN",")",";","AT","=","min","(","AO",",","AN",")",";","AS","=","max","(","AP",",","AS",")",";","AT","=","min","(","AP",",","AT",")",";","AU","=","max","(","AQ",",","AR",")",";","AV","=","min","(","AQ",",","AR",")",";","AS","=","max","(","AU",",","AS",")",";","AT","=","min","(","AV",",","AT",")",";","AV","=","AS","*","AG",";","AT","=","AS","-","AT",";","AV","=","max","(","AH",",","AV",")",";","AI","=","AT","<","AV",";","if","(","AI",")","return","Bb",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AV","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","-","1",",","-","1",")",",","AE",".","xy",")",")",";","AS","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","1",",","1",")",",","AE",".","xy",")",")",";","AU","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","1",",","-","1",")",",","AE",".","xy",")",")",";","AW","=","bB","(","AB","(","AD",",","Bc",",","vec2","(","-","1",",","1",")",",","AE",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["AX","=","AQ","+","AO",";","AY","=","AR","+","AP",";","AT","=","1.0","/","AT",";","AZ","=","AX","+","AY",";","AX","=","(","-","2.0","*","AN",")","+","AX",";","AY","=","(","-","2.0","*","AN",")","+","AY",";","A_","=","AU","+","AS",";","AU","=","AV","+","AU",";","Ba","=","(","-","2.0","*","AP",")","+","A_",";","AU","=","(","-","2.0","*","AQ",")","+","AU",";","AV","=","AV","+","AW",";","AS","=","AW","+","AS",";","Ba","=","(","abs","(","AX",")","*","2.0",")","+","abs","(","Ba",")",";","AU","=","(","abs","(","AY",")","*","2.0",")","+","abs","(","AU",")",";","AY","=","(","-","2.0","*","AR",")","+","AV",";","AS","=","(","-","2.0","*","AO",")","+","AS",";","Ba","=","abs","(","AY",")","+","Ba",";","AU","=","abs","(","AS",")","+","AU",";","A_","=","AV","+","A_",";","AV","=","AE",".","x",";","AI","=","Ba",">=","AU",";","A_","=","AZ","*","2.0","+","A_",";","if","(","!","AI",")","AQ","=","AR",";","if","(","!","AI",")","AO","=","AP",";","if","(","AI",")","AV","=","AE",".","y",";","A_","=","(","A_","*","(","1.0","/","12.0",")",")","-","AN",";","AP","=","AQ","-","AN",";","AR","=","AO","-","AN",";","AQ","=","AQ","+","AN",";","AO","=","AO","+","AN",";","AJ","=","abs","(","AP",")",">=","abs","(","AR",")",";","AR","=","max","(","abs","(","AP",")",",","abs","(","AR",")",")",";","if","(","AJ",")","AV","=","-","AV",";","AT","=","At","(","abs","(","A_",")","*","AT",")",";","Bd",".","x","=","Bc",".","x",";","Bd",".","y","=","Bc",".","y",";","Be",".","x","=","(","!","AI",")","?","0.0",":","AE",".","x",";","Be",".","y","=","(","AI",")","?","0.0",":","AE",".","y",";","if","(","!","AI",")","Bd",".","x","+=","AV","*","0.5",";","if","(","AI",")","Bd",".","y","+=","AV","*","0.5",";","Bf",".","x","=","Bd",".","x","-","Be",".","x","*","FXAA_QUALITY_P0",";","Bf",".","y","=","Bd",".","y","-","Be",".","y","*","FXAA_QUALITY_P0",";","Bg",".","x","=","Bd",".","x","+","Be",".","x","*","FXAA_QUALITY_P0",";","Bg",".","y","=","Bd",".","y","+","Be",".","y","*","FXAA_QUALITY_P0",";","A_","=","(","(","-","2.0",")","*","AT",")","+","3.0",";","AP","=","bB","(","Aw","(","AD",",","Bf",")",")",";","AT","=","AT","*","AT",";","AZ","=","bB","(","Aw","(","AD",",","Bg",")",")",";","if","(","!","AJ",")","AQ","=","AO",";","AR","=","AR","*","1.0","/","4.0",";","AO","=","AN","-","AQ","*","0.5",";","AT","=","A_","*","AT",";","AJ","=","AO","<","0.0",";","AP","-=","AQ","*","0.5",";","AZ","-=","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P1",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P1",";","if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P2",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P3",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P4",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P5",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P6",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P7",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P8",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P9",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P10",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P11",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AM",")","{","if","(","!","AK",")","AP","=","bB","(","Aw","(","AD",",","Bf",".","xy",")",")",";","if","(","!","AL",")","AZ","=","bB","(","Aw","(","AD",",","Bg",".","xy",")",")",";","if","(","!","AK",")","AP","=","AP","-","AQ","*","0.5",";","if","(","!","AL",")","AZ","=","AZ","-","AQ","*","0.5",";","AK","=","abs","(","AP",")",">=","AR",";","AL","=","abs","(","AZ",")",">=","AR",";","if","(","!","AK",")","Bf",".","x","-=","Be",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AK",")","Bf",".","y","-=","Be",".","y","*","FXAA_QUALITY_P12",";","AM","=","(","!","AK",")","||","(","!","AL",")",";","if","(","!","AL",")","Bg",".","x","+=","Be",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AL",")","Bg",".","y","+=","Be",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","AR","=","Bc",".","x","-","Bf",".","x",";","AQ","=","Bg",".","x","-","Bc",".","x",";","if","(","!","AI",")","AR","=","Bc",".","y","-","Bf",".","y",";","if","(","!","AI",")","AQ","=","Bg",".","y","-","Bc",".","y",";","AL","=","(","AP","<","0.0",")","!=","AJ",";","AP","=","(","AQ","+","AR",")",";","AJ","=","(","AZ","<","0.0",")","!=","AJ",";","AP","=","1.0","/","AP",";","AK","=","AR","<","AQ",";","AQ","=","min","(","AR",",","AQ",")",";","AJ","=","AK","?","AL",":","AJ",";","AT","=","AT","*","AT",";","AP","=","(","AQ","*","(","-","AP",")",")","+","0.5",";","AT","=","AT","*","AF",";","AP","=","AJ","?","AP",":","0.0",";","AT","=","max","(","AP",",","AT",")",";","if","(","!","AI",")","Bc",".","x","+=","AT","*","AV",";","if","(","AI",")","Bc",".","y","+=","AT","*","AV",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Aw","(","AD",",","Bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","Aw","(","AD",",","Bc",")",".","xyz",",","AN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Bo","(","in","sampler2D","Bi",",","in","vec2","Bj",",","in","vec2","Bk",")","{","float","Bl",",","Bm",",","Bn",";","Bl","=","texture2D","(","Bi",",","Bj",")",".","r",";","Bm","=","Bk",".","x",";","Bn","=","Bk",".","y",";","Bm","=","2.0","*","Bm","/","(","Bm","+","Bn","-","(","2.0","*","Bl","-","1.0",")","*","(","Bn","-","Bm",")",")",";","return","Bm",";","}"]}]}}