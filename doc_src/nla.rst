.. _nla:

*******************
Нелинейная анимация
*******************

.. _nla_editor:

Редактор NLA
============

Редактор нелинейной анимации, имеющийся в программе Blender, позволяет в удобной
форме задавать поведение сцены. С его помощью можно реализовать несложные
сценарии. Таким образом
исключается необходимость программирования простых сцен и приложений.

.. image:: src_images/nla/simple_machinima.jpg
   :align: center
   :width: 100%

|

Движком поддерживается управление следующими сущностями:

* Любая анимация, параметры которой могут быть представлены с помощью `действий` (Action)

* Воспроизведение звуков

* Эмиссия частиц (в виде привязки к глобальной шкале времени)

.. image:: src_images/nla/nla_editor.jpg
   :align: center
   :width: 100%
   

Использование
-------------

#. Во вкладке ``Scene`` активировать панель ``NLA``.
#. В редакторе ``NLA Editor`` задать необходимую конфигурацию поведения сцены.
#. На панели ``Timeline`` выбрать интервал времени анимации.


Дополнительные настройки
------------------------

Настройка сцены *NLA > Cyclic NLA* позволяет активировать режим
циклической NLA-анимации.

.. note::
    Для использования вертексной анимации необходимо выставить опцию
    "Allow NLA" на :ref:`панели запекания вертексной анимации <ver_anim>`.

Ограничения
-----------

* Одновременное проигрывание различных видов анимации для одного объекта не поддерживается.

Управление через API
====================

Для управления нелинейной анимацией через API существует модуль ``nla.js``.

.. code-block:: javascript

    // ...
    var m_nla = require("nla");
    // ...
    m_nla.set_frame(150);
    // ...
    var frame = m_nla.get_frame();
    // ...
    m_nla.play();
    // ...
    m_nla.stop();
    // ...

  
При использовании :ref:`Logic Editor <logic_editor>` функции ``set_frame``, ``play``, 
``stop`` недоступны.
